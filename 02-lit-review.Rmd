# Literature Review {#lit}

As discussed in Section \@ref(intro), forecasters have modeled the level of service and the individual travel behavior of ride-hailing and other novel modes in a variety of ways. To best understand a few of the methodological approaches forecasters have used, the following literature review outlines the pros and cons of using spatial analysis, activity-based models, multi-agent simulation, and paired modeling approaches to model the use and impacts of ride-hailing. Since those individuals who use novel modes in general have similar travel behavior to those who use ride-hailing, we include references to research about both ride-hailing services and other novel modes. 

## Spatial Analysis and Ride-hailing {#lit-simp}
The most prominent methodological approach to understanding ride-hailing service is through simple approaches like spatial, statistical, and empirical analyses. For example @correa17 developed heatmaps using spatio-temporal data to analyze ride-hailing pickup locations. @marquet20 processed data and used statistical measures to estimate a connection between walkability index and ride-hailing usage. @dong18 conducted an empirical analysis to understand the unique travel patterns of ride-hailing vehicles. Many other research studies have used simple approaches to estimate the ridership and service of ride-hailing and other novel modes [@li22; @hyland18; @cho22; @hosseinzadeh21; @zhou19]. 

The upside to implementing a simple spatial, statistical, or empirical analysis is its simplicity. The downside, however, is that with its simplicity comes decreased flexibility. For example, @hosseinzadeh21 determined regional attributes that affect the density of regional e-scooter trips by conducting a spatial analysis. By following a simple statistical approach they learned of the impact land use, age, and other demographics have on e-scooter use, but did not have the flexibility to understand e-scooter travel times and other level of service measures. Also, simple spatial, statistical, and empirical methods oftentimes only answer one particular geographic question. For example, @li22 estimated a correlation between the number of ride-hailing pickup and drop-offs with the location of subway services and transit routes. Although these results may provide insights on how to improve transit services, ride-hailing level of service and ridership statistics could not be estimated as well. Overall, spatial, statistical, and empirical analyses are unable to accurately forecast the ridership, level of service, and other usage measures simultaneously.

## Activity-based Models and Ride-hailing {#lit-abm}
Activity-based models are transportation behavior models that construct daily activity patterns for synthetic individuals from behavioral choice models. Activity-based models predict the set of activities to participate in before they predict how and when to get to those activities [@philip13]. By estimating activity demand before mode choice and route selection, activity-based models more accurately represent the way people travel. Activity-based models also use utility theory and logit based regression to best estimate individual decisions and travel behavior [@bowman98]. In addition to representing behavior accurately, another advantage to using activity-based models is the modal consistency between trips on the same tour [@nayak22; @hasnine21; @knapen21; @gomes21]. In other words, activity-based models ensure that individuals chose coherent modes between subsequent trips (modal consistency) when those trips occur on the same tour (a sequence of trips starting and ending at the home location). In real life, individuals travel in a similar manner among trips of the same tour. Activity-based models account for this natural tendency by chaining trips of the same individual together, or by developing a tour mode construct. A tour mode represents the primary mode any particular person selects to use on a tour. By estimating individual behavior accurately and by maintaining modal consistency among trips of the same individual, ride-hailing usage can be consistently distributed to the same trips and same individuals in activity-based models, suggesting justifiable ride-hailing selection estimates.

Many forecasters elect to use activity-based models to model ride-hailing and other modes because of the behavioral representation and modal consistency they provide. For example, @nguyen22 modeled one-way car-sharing services with an activity-based model because the modal consistency between trips allowed them to estimate vehicle usage. @xu19 modeled privately-owned autonomous vehicles with an activity-based model as a way to better understand their impact on household travel patterns. @rafiq22 used an activity-based approach to estimate the five most common tour structures of ride-hailing individuals. Activity-based models can determine the specific travel patterns of those who use ride-hailing services.

Although there are advantages to using activity-based models to model ride-hailing, forecasters must consider the various weaknesses that exist when using activity-based models. One of the biggest shortfalls with most activity-based models is that travel times are averaged along travel links [@rsg16; @mahmoudi21]. For example, although @nguyen22 used an activity-based model to model one-way car sharing, they noted that it used a regression function to estimate travel time. For this reason, @nguyen22 noted that it was more difficult to verify the service capabilities of the car-sharing modes. Many activity-based models also use pre-generated skims composed of average travel statistics to determine service related measures [@zhang18]. Skims are large matrices composed of travel time, distance, cost, etc. that exists between every origin-destination zone combination. With a dynamic traffic assignment model (DTA), travel statistics between every origin-destination zone are determined by spatially aggregating each zone and then by calculating average values between the centroid of each zone using a loaded network-assignment methodology. Activity-based models lack variability when modeling travel and wait times of ride-hailing and other novel vehicles because they use travel skims as a primary input. In addition, since concrete travel values are used as inputs, it can be difficult to model ride-hailing vehicle availability and passenger capacity limitations as well. 

## Multi-agent Simulation and Ride-hailing {#lit-mas}
An alternative to activity-based models for forecasting ride-hailing level of service is multi-agent simulation. Multi-agent simulation models interactions between individual agents by reading in a set of detailed daily activity patterns onto a transportation network [@bazghandi12; @amblard15; @siebers08]. Then, through an iterative process, multi-agent simulation maximizes the individual travel utility by achieving mode, route, and overall traffic equilibrium. By forecasting travel behavior on an individual level until equilibrium is reached, varied, reasonable wait time and travel time estimations are predicted for every agent. Forecasting level of service with unique travel time statistics produces more realistic results. Along with modeling each individual closely, a multi-agent simulation keeps track of every ride-hailing vehicle as well. The complexity of the vehicular availability model along with individual travel behavior model allows multi-agent simulation to estimate exact, variable wait and travel times. For example, the model knows the exact ride-hailing vehicle availability and ride-hailing passenger capacity at every moment of the day. Therefore, capacity measures, like ride-hailing ridership and utilization, can be estimated realistically and with great precision at the individual level using multi-agent simulation. 

Various forecasters elect to use multi-agent simulation to model the level of service of ride-hailing and other novel modes because agent-to-agent and agent-to-vehicle interactions are modeled closely. For example, @kamel19 chose to use a multi-agent simulation to model shared autonomous vehicles (SAVs) because the granularity of the interaction between different agent types and SAV modes helped the researchers understand the effect user preference has on modal decisions. @horl19b also analyzed shared autonomous vehicles with a multi-agent simulation, mainly to take advantage of the detailed vehicular model. The model allowed forecasters to adjust fleet size and to optimize the way fleet vehicles behaved. By utilizing the advanced vehicular model, the researchers were able to estimate the overall system performance, wait times, and cost of various autonomous vehicle fleets. Similarly, @becker20 used MATSim, an open source agent-based simulation used for large scale scenarios, to model the travel times and costs of different on-demand transit modes (ride-hailing, car-sharing, bike-sharing). The primary advantage of MATSIM is that it provides a "dynamic demand response towards changes in service attributes such as travel times or costs" [@becker20]. Many forecasters continue to analyze new transportation technologies with multi-agent simulation because its inherit advantages are helpful to understanding service capabilities.

Although multi-agent simulation excels at estimating the level of service of ride-hailing vehicles at fine detail, various pitfalls do exists. For example, @ciari16 summarizes a multitude of research done to understand demand for car-sharing with the multi-agent simulation MATSim. In this research, they note that although multi-agent simulation provides an extensive level of detail, it does not necessarily equate to real world accuracy. Because multi-agent simulation uses an iterative process of maximizing individual utility until a state of overall equilibrium is reached, it remains difficult to accurately portray exact individual behavior choices. The structure of the activity-based choice model allows strong individual behavioral representation, whereas the complexity of the multi-agent simulation may cause individual choices to be inaccurate and unreasonable. Similarly, where the activity-based model may excel at more realistic mode choice selections among trips of the same tour, some multi-agent simulation struggle. For example, Figure\@ref(fig:fig-mode-compare) provides a visual example of mode choice shortcoming present in some multi-agent simulations. As seen in Figure \@ref(fig:fig-mode-compare), all trips of the same tour for the activity-based model are based on the selected tour mode. This allows users to switch from one mode to another between trips, as long as they are compatible. On the other hand, the multi-agent simulation may only undergo mode choice selection on the first trip of the tour, and be trapped into using that same mode on future trips. This is not true for all multi-agent simulations, but is true for the multi-agent simulations most often used in literature. This results in less realistic travel behavior. The last inherit weakness of multi-agent simulation is that it is computationally heavy; requiring abundant time and resources. Overall where the multi-agent simulation lacks in forecasting ride-hailing services the activity-based model excels, and vice versa, and so the combination of using both strategies could prove effective.

```{r fig-mode-compare, out.width='100%', fig.cap='Mode choice in activity-based models and multi-agent simulation.', out.width='100%', fig.asp=1, fig.align='center', echo=FALSE}
knitr::include_graphics("pics/abm-mas-compare.png")
```

## Limited Attempts to Pair Mulitple Modeling Approaches
The varying strengths and weaknesses within both activity-based models and multi-agent simulation point to possibly using both approaches to understand ride-hailing ridership and level of service. Yet few forecasters have attempted to reconcile or pair these two disparate approaches in order to better understand the behavior of ride-hailing and other novel modes. However, one example of reconciling the traditional approaches is with the Microsimulation Transport Orchestrator (MITO) system [@moeckel20; @zwick21]. MITO's primary purpose is to overcome the limitations of the traditional trip-based model while being easier to implement than the traditional activity-based model. Like an activity-based model, MITO simulates each agent individually. MITO also includes a simplified activity schedule builder, allows forecasters to add attributes, allows agent tracing, and is not as computationally heavy as traditional multi-agent simulations [@moeckel20]. @zwick21 used MITO to estimate travel demand and MATSim to simulate that demand. By pairing together MITO and MATSim, the researchers were able to gather service criteria for pooled on-demand ride-hailing vehicles at a detailed level, while also maintaining the behavioral integrity of each agent. 

Another example of pairing together two disparate modeling approaches involves discrete choice and MATSIM. Since MATSim implements a feedback loop to determine mode choice instead of using a discrete choice model, some researches have attempted to pair together a discrete mode choice model with MATSim in attempt to shorten the number of iterations needed to be run. For example, @horl19 discovered that by using a discrete choice model within MATSim, no irrelevant mode choice decisions were made. This indeed, lead to less iterations being run while enhancing the realistic nature of the mode choice selection. However, although initial modal decisions were more accurate than the default MATSim model, the discrete choice model added a layer of complexity. The need for more accurate and useful data gave the model runners less freedom. 

Overall, these few examples show that by pairing together multiple model frameworks the strengths of each model is maximized. To the authors knowledge, however, no previous literature exists on pairing together an activity-based model and a multi-agent simulation for the purpose of modeling ride-hailing ridership and level of service. By using an activity-based model we can take advantage of the strong individual behavior representation and realistic mode choice decisions. By using a multi-agent simulation we can take advantage of the vaste individual travel behavior detail and the advanced vehicular availability model. We therefore hypothesize that with a joint activity-based model and multi-agent simulation, we can utilize the advantages of both models to capture ride-hailing ridership and level of service measures. And so, the objective of this study is to better understand the significance of using a linked activity-based model and multi-agent simulation in forecasting the usage of ride-hailing modes. 
