% This is the Reed College LaTeX thesis template. Most of the work
% for the document class was done by Sam Noble (SN), as well as this
% template. Later comments etc. by Ben Salzberg (BTS). Additional
% restructuring and APA support by Jess Youngberg (JY).
% Your comments and suggestions are more than welcome; please email
% them to cus@reed.edu
%
% See https://www.reed.edu/cis/help/LaTeX/index.html for help. There are a
% great bunch of help pages there, with notes on
% getting started, bibtex, etc. Go there and read it if you're not
% already familiar with LaTeX.
%
% Any line that starts with a percent symbol is a comment.
% They won't show up in the document, and are useful for notes
% to yourself and explaining commands.
% Commenting also removes a line from the document;
% very handy for troubleshooting problems. -BTS

% As far as I know, this follows the requirements laid out in
% the 2002-2003 Senior Handbook. Ask a librarian to check the
% document before binding. -SN

%%
%% Preamble
%%
% \documentclass{<something>} must begin each LaTeX document
\documentclass[12pt, oneside, openright]{byuthesis}


\title{Forecasting Novel Modes across Multiple\\
Mode Choice Model Frameworks}
\author{Christopher Day}
\copyyear{2022}
\committeeMembers{Gregory S. Macfarlane, Chair

Grant G. Schultz

Gustavious P. Williams}
\keywords{activity-based model, multi-agent simulation, novel transport modes, ActivitySim, BEAM}
\degree{Master of Science}
\doctype{thesis}
\department{Department of Civil and Construction Engineering}



	\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{dsfont}
\usepackage{pdflscape}
\usepackage{graphicx}
\usepackage{mathtools}
\usepackage{eqparbox}
\usepackage{makecell}
	\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
% End of CII addition
%%
%% End Preamble
%%
%

% Pandoc citation processing
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit} % times entry-spacing
\setlength{\cslentryspacingunit}{\parskip}
% for Pandoc 2.8 to 2.10.1
\newenvironment{cslreferences}%
  {}%
  {\par}
% For Pandoc 2.11+
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \fi
  % set entry spacing
  \setlength{\parskip}{#2\cslentryspacingunit}
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}


\begin{document}

\begin{abstract}
The advent of novel transport modes has challenged forecasters to develop new methods of capturing behavior and estimating service capabilities. Bike share, e-scooter, ride hail, and autonomous vehicles have been forecasted with activity-based models, multi-agent simulations, spatial analysis, survey data and statistical methods, and even machine learning approaches. Methodologies to model new transport technologies are dissimilar and difficult to access. In this paper, we examine novel mode forecasts generated by different activity-based model and multi-agent simulation mode choice combinations. Using ActivitySim as the activity-based model and BEAM as the multi-agent simulation, we establish 10 different mode choice combinations to analyze ride hail capabilities for a Salt Lake City, Utah case study region. By analyzing ride hail ridership, utilization, and wait times we determine two effective approaches to modeling novel modes using a linked activity-based model and multi-agent simulation. We also determine that linking an activity-based model and a multi-agent simulation is a valid methodology to forecasting novel modes, especially if novel mode choice is kept to only one of those modeling tools. Lastly, we conclude that using the combination of path, person, and location type variables to calculate the mode choice utility is more effective than only using path type variables. Overall, the results of our research give direction to those struggling to forecast new transport technologies with the current disarray of modeling approaches.
\end{abstract}


\makefrontmatter % this stuff will be roman-numbered
\thesisbody

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

\hypertarget{problem-statement}{%
\section{Problem Statement}\label{problem-statement}}

The advent of novel transport modes has challenged forecasters to develop new methods of capturing behavior and estimating service capabilities. The usage of bike share, an affordable and sustainable bike rent program, has been modeled countless times each with a different methodology (e.g., Hyland et al. (2018), Biehl, Ermagun, and Stathopoulos (2019), Cho and Shin (2022), W. Li and Kamargianni (2018), Welch, Gehrke, and Widita (2020), X. Zhou, Wang, and Li (2019), Song et al. (2019)). Forecasters are riddled with determining the best technique for understanding who uses e-scooters (public electric scooters) and in what locations they would be most effective (e.g, Zuniga-Garcia et al. (2022), Tuli, Mitra, and Crews (2021), W. Zhang et al. (2021), M. Lee et al. (2021), H. Lee et al. (2021), Hosseinzadeh et al. (2021)). (sentence on e-bikes). In general, forecasters have modeled micromobility (bike share, e-scooters, e-bikes) in many ways, yet few have attempted to model multiple novel modes simultaneously (e.g., Reck et al. (2021), Campbell et al. (2016), Lazarus et al. (2020), McKenzie (2019), Younes et al. (2020)). Ride hail and ride share, which allow users to hire a driver, behave differently than regular car modes. Given their unique nature, understanding their behavior and service capabilities is particularly challenging (e.g., Kang et al. (2021), Y. Li, Liu, and Xie (2020), Dong (2020), Dean and Kockelman (2021)). Forecasters have even attempted to understand the effects of autonomous vehicles, even though to date little to no data exists on fully-autonomous vehicles (e.g., Mo, Chen, and Zhang (2022), Wadud and Chintakayala (2021), F. Zhou et al. (2020)). New transport technologies are becoming more prominent each day, and equally so is the need to accurately capture their behavior.

Various efforts have been made to model novel transport modes accurately, but since methodologies are dissimilar with one another it remains difficult to determine the best approach. For example, some forecasters have chosen to model novel transport modes with an activity-based model, which uses daily activity patterns as the central tool to model an individual's travel behavior (e.g., Xu, Mahmassani, and Chen (2019), Muhammad et al. (2019), Macfarlane, Lant, et al. (2021)). Other forecasters use multi-agent simulation, which focuses on modeling the interactions between different agents, to understand new transport technologies (e.g., Shimizu, Akai, and Nishino (2013), Sánchez et al. (2019), Hörl et al. (2019)). \textbf{Many forecasters have modeled novel modes using a logit based regression analysis, which uses a function to understand characteristics of the modes (e.g., Welch, Gehrke, and Widita (2020), M. Lee et al. (2021), Dong (2020)).}(delete? -- logit regression is used in abm/mas models) Some chose a simpler approach, spatial analysis and geography data, to understand new transport technologies (e.g., Hyland et al. (2018), Cho and Shin (2022), Hosseinzadeh et al. (2021)). Forecasters have even attempted to use machine learning to better understand novel modes! (e.g., X. Zhou, Wang, and Li (2019)). With limited data on novel transport modes, the validity of the results from each approach can be difficult to verify.

\hypertarget{purpose-of-research}{%
\section{Purpose of Research}\label{purpose-of-research}}

In this paper we examine novel mode forecasts generated by different activity-based model and multi-agent simulation mode choice combinations. By examining the ride hail service capabilities between each combination, we hope to understand which mode choice combination is best, or if a best combination even exists. Since only limited data on novel mode usage exists, it seems logical to test different mode choice combinations to determine the best way to model new transport technologies. Overall, this paper aims to give forecasters additional direction in how to model novel transport modes.

\hypertarget{lit}{%
\chapter{Literature Review}\label{lit}}

As discussed in the introduction, forecasters model novel transport modes using activity-based models, multi-agent simulation, spatial analysis, machine learning, and more. Since our research mainly focuses on activity-based models, multi-agent simulation, and the link between them both, understanding the other model frameworks is not within the scope of this project. For this reason, the following literature review outlines the strengths and weaknesses of activity-based models and multi-agent simulation, the previous attempts to model novel transport modes with activity-based models and multi-agent simulation, and the brief literature of those who have attempted to reconcile two modeling approaches within the same study. Within the scope of this paper however, it is not practical to provide a comprehensive review of all activity-based models, multi-agent simulations, or paired modeling approaches.

\hypertarget{lit-abm}{%
\section{Introduction to Activity-based Models}\label{lit-abm}}

Activity-based models are transportation models that construct daily activity patterns from behavioral choice models. They predict what activities are conducted, where those activities are conducted, the length and time of those activities, and the people involved in those activities. This detailed approach to modeling behavior allows forecasters to understand travel at a high level both spatially and temporally. According to Philip, Sreelatha, and George (2013), activity-based models generate travel demand by first modeling activity demand. Understanding the idea that all travel is generated by activities is essential to accurately representing the way people travel. This link between activity and travel allows activity-based models to model behavior especially well, which is particularly advantageous when modeling novel modes. Bowman (1998) also explains that activity-based models have choice models that use utility theory and logit based regression to estimate behavior. These choice models accept an array of inputs relating to person, household, and regional data, to better capture the travel behavior of any particular region.

In addition to representing behavior accurately, another advantage to using activity-based models is that there is modal consistency between trips on the same tour (e.g., Nayak and Pandit (2022), Hasnine and Nurul Habib (2021), Knapen et al. (2021), Gomes, CALDAS, and Pitombo (2021)). Nayak and Pandit (2022) explains that other existing models fail to consider the ``interrelationships among trips'' performed by the same individual on the same tour. For example, if you were to take your car to the gym, and then stop by the store on the way back home, wouldn't you also use your car to get from the store back to your home? Individuals will act similarly among trips of the same tour, and activity-based models account for this natural tendency. Hasnine and Nurul Habib (2021) explains that tour based modeling is the core of activity-based models; ``tackling'' every trip within a tour is essential to understanding the dynamics that exists between trips. Gomes, CALDAS, and Pitombo (2021) explains that trip-based models, unlike activity-based models, disregard trip sequences, trips made by the same individual, and the relationship between trips and activities. Chaining trips of the same individual together, within the same tour, helps ensure modal consistency within models.

Knowing the advantages that activity-based models provide when modeling travel behavior, many forecasters use activity-based models to model the behavior and service capabilities of novel modes. For example, some new technologies that have been modeled with activity-based models are car-sharing (e.g., Nguyen, Hoang, and Vu (2022), Q. Li et al. (2018)) and autonomous vehicles (e.g., Xu, Mahmassani, and Chen (2019), Vyas et al. (2019)). Nguyen, Hoang, and Vu (2022) modeled one-way car-sharing services with an activity-based model because the modal consistency between trips allowed them to track vehicle demand, pricing, and other parameters. Xu, Mahmassani, and Chen (2019) modeled privately-owned autonomous vehicles with an activity-based model as a way to better understand their impact on household travel patterns, including very large households. Macfarlane, Lant, et al. (2021) used an activity-based model to model on-demand wheelchair accessible microtransit vehicles. The activity-based model generated daily activity patterns for all individuals in the region, including those who were wheelchair dependent. With those plans they were able to simulate microtransit vehicles with a microsimulation tool, and process the results to understand service capabilities. Tzouras et al. (2022) conducted a quantitative study of activity-based models for modeling e-scooters. They agreed that activity-based models are an effective vehicle to describe the spatiotemporal variation in e-scooters, and novel modes in general. Muhammad et al. (2019) used an activity-based model to model bike share and even the concept of Mobility as a Service, which aims to make public transport a pay-per-service or monthly subscription. Many forecasters elect to use activity-based models to model new transport technologies because of the behavioral representation and modal consistency they provide.

Although there are advantages to using activity-based models to model novel modes, forecasters must consider the various weaknesses that exist when using activity-based models. One of the biggest shortfalls within most activity-based models is that travel times are averaged along travel links (e.g., RSG (2016), Mahmoudi et al. (2021)). For example, although Nguyen, Hoang, and Vu (2022) used an activity-based models to model one-way car sharing, they noted that it used the BPR function to estimate travel time. The BPR function is a regression function that estimates average travel time based on arrival flows. When using the BPR function to estimate smaller time intervals though, it becomes inconsistent. For this reason, Nguyen, Hoang, and Vu (2022) noted that it was more difficult to verify the service capabilities of the car-sharing modes. Similarly, on-demand microtransit vehicles should be modeled with variable wait time; the difference between a 4 minute wait and a 17 minute wait is significant when traveling. Macfarlane, Lant, et al. (2021) recognized this shortcoming, and elected to estimate the on-demand travel time by using a multi-agent simulation on top of an activity-based model. Overall, since travel time is a significant part of the mode choice utility, average travel time is a shortfall when modeling novel modes.

Another typical weakness present in most activity-based models is their focus on individual-based behavior, instead of household-based behavior. Although it is widely known that many decisions made by humans are done collectively, little effort has been made to model travel based on intra-household interactions and group decisions making (J. Zhang and Fujiwara 2006). However, some forecasters have attempted to account for this shortfall (e.g., J. Zhang and Fujiwara (2006), Neutens et al. (2008), Soo (Kum Lin (2009)). Neutens et al. (2008) and Soo (Kum Lin (2009) in particular attempted to extend individual-level travel to household-level travel by assigning certain tasks (activities) to different household individuals, verifying that schedules within the same households were coherent, and developing a household utility measure. J. Zhang and Fujiwara (2006) developed a household utility function to help represent the ``diverse intra-household interactions''. Travel behavior is more than just a set of strung together activities, and certain interactions (e.g., household-based decisions) are important to consider when modeling transport modes.

\hypertarget{lit-mas}{%
\section{Introduction to Multi-agent Simulation}\label{lit-mas}}

An alternative to activity-based models for forecasting novel modes is multi-agent simulation. Multi-agent simulation, usually synonymous with the term microsimulation, models interactions between individual agents. Multi-agent simulation is a desirable tool because it allows analysis to be done on both the individual and group levels; individualized decisions can be explored (e.g., Kamel et al. (2019)) as well as agent to agent interactions (e.g., Bazghandi (2012), Amblard et al. (2015), Siebers and Aickelin (2008)). These agent to agent interactions and individualized decisions allow forecasters to better understand why a novel mode may or may not be chosen. For example, multi-agent simulation allows forecasters to know exactly how many users participate in a novel transport mode, which type of users are interested in a novel transport mode, and if other agents played a role in the novel transport mode choice decision.

Along with modeling unique agents, another reason multi-agent simulation is advantageous for modeling novel modes is its transportation network and capacity constraint. Transportation networks are visual representations of the actual road networks, and allow forecasters to see the transportation decisions made by each agent. In addition to being visual tools, agents are coded to the network allowing them to interact with attributes of the network itself. For example, Dia (2002) used a real traffic network in their model to simulate areas of high traffic congestion. Within the model, agents could notice high congestion areas and some of them would chose to take an alternate route. Due to the interaction between individual agents and roadway conditions, realistic travel behavior is captured on a global scale. Djavadian and Chow (2017) and Fujii, Uchida, and Yoshimura (2017) also used a real transportation network to capture realistic global travel behavior. Djavadian and Chow (2017) explored the usage of flexible mobility systems like taxi and carpool and Fujii, Uchida, and Yoshimura (2017) explored mixed traffic consisting of cars, pedestrians, and trams. Fujii, Uchida, and Yoshimura (2017) even enhanced the basic transportation network system by coding various virtual driving lanes at each intersection, thus making the network even more realistic. Cetin et al. (2002) describes two more benefits of road networks: one, vehicles are subject to remain on network links for a certain amount of time (according to their travel speed) and, two, a storage capacity exists for each link that once met, no more vehicles can enter. By using a transportation network, the travel times, speeds and congestion become reliable model outputs, and therefore, the travel times, speeds, and congestion of novel modes are easily modeled. Multi-agent simulation uses unique agents with a realistic transportation network to create attainable and reliable model outputs.

Due to the advantages that multi-agent simulation provides, various forecasters have elected to use them to model novel transport modes. For example, Kamel et al. (2019) chose to use a multi-agent simulation to model shared autonomous vehicles because decision-making was done on an individual level. This granularity helped the researchers understand how user preferences affected the modal split of shared autonomous vehicles. Hörl et al. (2019) also analyzed shared autonomous vehicles with a multi-agent simulation, mainly to take advantages of the detailed network dynamics. By utilizing the detailed network, the researchers were able to estimate the system performance, wait times, and cost of various autonomous vehicle fleets. Other analyses have been completed on other novel modes like with shared mobility (e.g., Ciari, Balac, and Axhausen (2016), Shimizu, Akai, and Nishino (2013), Becker et al. (2020)) and electric vehicles (e.g., Sánchez et al. (2019)). Specifically, Ciari, Balac, and Axhausen (2016) summarizes a multitude of research done to understand demand for car-sharing with the multi-agent simulation model MATSim. In this research, they note that although multi-agent simulation provides an extensive level of detail, it does not necessarily equate to real world accuracy. A model rich in detail and with extensive behavioral rules, however, allows innovative transportation technologies to be analyzed efficiently in a world where ``solid behavioral knowledge does not yet exist''. Therefore, by using MATSim, Ciari, Balac, and Axhausen (2016) surpassed the typical pitfalls of modeling a new transport mode like car-sharing, and adequately modeled the individual travel decisions with a high temporal and spatial resolution. Similarly, Becker et al. (2020) used MATSim to model different shared mobility services (car-sharing, bike-sharing, ride-hailing). By using a multi-agent simulation, multiple novel transport modes could be analyzed simultaneously within the same model. Many forecasters continue to analyze new transportation technologies with multi-agent simulation because its inherit advantages are helpful to understanding service capabilities.

Although the advantages within multi-agent simulation are useful to modeling novel modes, forecasters must be aware of the weaknesses within these models as well. For example, although Kamel et al. (2019) used multi-agent simulation to model shared autonomous vehicles, they understood that the homogeneous behavior structure may decrease the accuracy of their results. A homogeneous behavior structure means that all agents within the model have similar preferences when facing decisions, like mode choice. This renders results to be less accurate since oftentimes people choose a specific mode based solely on their personal preference. Tchappi et al. (2018) reviews many of the advantages of a holonic multi-agent simulation (holonic meaning to divide the system into dependent groupings), but acknowledges the weakness that driver behavior is not homogeneous. The other major weakness of multi-agent simulations is their high computational requirements (e.g., Siebers and Aickelin (2008), Cetin et al. (2002), Adler et al. (2005)). In order to adequately model the individualized nature of every agent, while mapping each agent to a detailed road network, affluent computing power is needed. The need for a high processing computer and sufficient computing time is indeed a limitation for some forecasters.

Another inherit weakness of most multi-simulation models is its focus on trips-based modeling. Most multi-simulation models only simulate agents on a trip level, ignoring the tour-based framework present in most activity-based models. Figure \ref{fig:fig-mode-compare} provides a visual example of this difference. If a person wants to go to their work activity by train, an activity-based model knows that they can either walk or take transit to their gym activity. Contrastingly, a multi-agent simulation bases mode choice on the first trip of the day. This means that a multi-agent simulation will determine the optimal mode to go to the gym in, and then figure our how to get to work based on the first trip mode. In addition, an activity-based model knows that when a person leaves for lunch from their work activity, they will be returning back to their work activity after lunch. This means that the person is able to leave their car at work and possibly walk or take transit to and from their lunch activity. In a multi-agent simulation though, if someone goes to lunch, they will most likely take their car as to not abandon their vehicle for the rest of their day. It is clear that a multi-agent simulation's mode choice is less representative of how people actually transport themselves during the day. An activity-based model provides a better representation of mode choice. In this research we attempt to link a activity-based model and a multi-agent simulation tool as to use the advantages of both models to better model novel transport modes.

\begin{figure}

{\centering \includegraphics[width=1\linewidth]{pics/abm-mas-compare} 

}

\caption{Mode Choice in Activity-based Models and Multi-agent Simulation.}\label{fig:fig-mode-compare}
\end{figure}

\hypertarget{limited-attempts-to-pair-two-disparate-modeling-approaches}{%
\section{Limited Attempts to Pair Two Disparate Modeling Approaches}\label{limited-attempts-to-pair-two-disparate-modeling-approaches}}

The varying strengths and weaknesses within both activity-based models and multi-agent simulation point to possibly using both approaches to understand novel mode behavior. Yet few forecasters have attempted to reconcile or pair these two disparate approaches in order to better understand novel mode behavior. However, one example of reconciling the traditional approaches is with the system MITO (e.g., Moeckel et al. (2020), Zwick et al. (2021)). MITO stands for Microsimulation Transport Orchestrator, and its primary purpose is to overcome the limitations of the traditional trip-based model while being easier to implement than the traditional activity-based model. Like a multi-agent simulation, MITO simulates each agent individually, however, MITO also restricts agents of the same household with a travel time budget. This travel time budget influences destination choice, and ensures that agents participate in sensible activities (e.i. those household members who commute to work are less likely to perform shopping and discretionary activities). MITO includes a simplified activity schedule builder, allows forecasters to add attributes, allows agent tracing, and is not as computationally heavy as traditional multi-agent simulations (Moeckel et al. 2020). Zwick et al. (2021) used MITO to estimate travel demand and MATSim, a multi-agent simulation tool, to simulate that demand. By pairing together MITO and MATSim, the researchers were able to gather service criteria for a novel transport mode: pooled on-demand ride hailing vehicles.

Traditionally, MATSim implements a feedback loop to determine mode choice instead of using a discrete choice model. For example, if in one iteration too many agents choose a car mode and travel times go up, in the next iteration some agents will opt to use an alternative mode. This process continues until equilibrium is found between the supply and demand. Some researches have attempted, however, to pair together a discrete mode choice models with MATSim in attempt to shorten the number of iterations needed to be run. For example, Hörl, Balać, and Axhausen (2019) discovered that by using a discrete choice model within MATSim, no irrelevant mode choice decisions were made. This indeed, lead to less iterations being run. However, although initial modal decisions were more accurate than the default MATSim model, the discrete choice model added a layer of complexity. Accurate and consistent data is needed in order for the discrete choice model to work effectively. This need for more data gives the model runners less freedom. Hörl, Balać, and Axhausen (2019) mentions that their research was merely an introduction to the concept, and further research is desirable to understanding all the benefits of linking discrete choice and simulation based tools.

Another example of pairing together two different modeling approaches is with an activity-based model and a dynamic traffic assignment model (e.g., L. Zhang et al. (2018), Pendyala et al. (2017), Shiftan (2000)). Dynamic traffic assignment models are useful as they understand time-dependent interactions, simulate individual agents, capture congestion, and can model new transportation technologies (L. Zhang et al. 2018). Pairing together activity-based models and dynamic traffic assignment models is of great interest to forecasters, as their structures are similar and together they produce results at a finer level of detail. L. Zhang et al. (2018) paired together InSITE, an activity-based model, with DTALite, a dynamic traffic assignment model, to model travel demand in the Baltimore-Washington region. Their conclusion was that the integrated model performed better than the singular InSITE activity-based model. Overall, they determined that the integrated model produced better results, but was more challenging to run and required consistent upkeep to ensure consistency between models.

To the authors knowledge, no previous literature exists on pairing together an activity-based model with a multi-agent simulation for the purpose of modeling novel mode behavior. Yet both activity-based models and multi-agent simulation have their own unique strengths when it comes to modeling novel modes. Could using both an activity-based model and a multi-agent simulation within the same study maximize each model's strengths while limiting each model's weaknesses? There exists a need to understand which methodology is best for modeling novel modes, or if a best methodology even exists. The objective of this study is to better understand the effects of using different mode choice combinations between varying activity-based models and multi-agent simulation combinations. We aim to use these results to provide forecasters guidance as to which choice model combination they should use to model novel modes.

\hypertarget{methods}{%
\chapter{Methods}\label{methods}}

We developed a series of experiments to understand the relative importance of activity-based and multi-agent simulation in forecasting the uptake of novel modes. These experiments were performed using ActivitySim as the activity-based model and BEAM as the multi-agent simulation tool. We used the Salt Lake City, Utah region as a case study for our experiments. Since ride hailing vehicles were an emerging technology in the region at the time of our study, we deemed it the appropriate novel transport mode to model in our experiments. The following section outlines the methodology for which we were able to model a novel transport mode with differing activity-based model and multi-agent simulation mode choice combinations.

\hypertarget{meth-asim}{%
\section{ActivitySim as the Activity-based Model}\label{meth-asim}}

ActivitySim is an activity-based simulator used to generate plans for millions of agents each with their own demographic attributes (Gali et al. 2008). Instead of independently modeling each trip, ActivitySim simulates each individual by calculating their daily travel diaries and schedules. Long term decisions are made first, and then shorter term decisions are calculated based on those long term decisions ({``ActivitySim: An Advanced Activity-Based Travel Demand Model Built by and for Users''} 2021). Overall, ActivitySim is an advanced activity-based model with the same advantages and disadvantages described in Section \ref{lit-abm}.

\hypertarget{novel-modes-in-activitysim}{%
\subsection{Novel Modes in ActivitySim}\label{novel-modes-in-activitysim}}

ActivitySim was chosen as the activity-based model in this research because built into its framework are the novel modes of ride hail and pooled ride hail. Specifically, ride hail and pooled ride hail fall under one of the four nested tiers of ActivitySim's nested logit model. This means that ride hail is a unique modal option not characterized by being an auto, non-motorized, or transit type mode. Figure \ref{fig:fig-asim-nest} displays the four tiers of the nested logit along with the modal alternatives of each tier (MTC 2012). These modal alternatives represent the alternatives available in both ActivitySim's tour based and trip based mode choice model. When determining the mode to use on a trip, ActivitySim first calculates the tour mode and subsequently calculates the trip mode based on the tour mode selection (See Figure \ref{fig:fig-mode-compare}). Person attributes, path attributes, location attributes, tour purpose value, and more all play a role in calculating the mode choice decision.

\begin{figure}

{\centering \includegraphics[width=.7\textwidth,trim = {5cm 6.5cm 12.5cm 4cm}]{thesis_files/figure-latex/fig-asim-nest-1} 

}

\caption{ActivitySim Nested Logit Model.}\label{fig:fig-asim-nest}
\end{figure}

In addition to using specific attributes to determine the mode choice decision, ActivitySim also sets default parameters for choosing ride hail and pooled ride hail vehicles. For example, a base fare, cost per mile, cost per minute, and cost minimum are all set before model runs. These values can be changed between model runs, but are held constant for all ride hail vehicles in the same model run. In addition, a mean wait time is used to help calculate the total travel time of ride hail vehicles. This means that all mode choice decisions to choose ride hail vehicles use the same wait time in the utility calculation. There is no variability in wait time between one agent using ride hail against another. One exception however, is that there are 5 different mean wait time values depending on the location of the ride hail request. Mean wait times also differ between single ride hail trips and shared ride hail trips. There is also one parameter for the maximum allowed wait time for a ride hail vehicle. Overall, it was essential to use ActivitySim to model ride hail vehicles because the mode choice structure fostered accurate behavioral representation and modal consistency between trips. However, ActivitySim's absence in using variable wait time to calculate the ride hail choice utility led us to also modeling ride hail vehicles with a multi-agent simulation (See Section \ref{meth-beam}).

\hypertarget{activitysim-configured-to-the-case-study-region}{%
\subsection{ActivitySim Configured to the Case Study Region}\label{activitysim-configured-to-the-case-study-region}}

ActivitySim was configured to the case study region by first gathering and generating the input data. Three input files were necessary in order to run ActivitySim:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  A synthetic population of the agents within the study area.
\item
  A zonal socioeconomic data file describing the characteristics of each zone.
\item
  A set of skims that describe the cost and travel times of all modes between all zones.
\end{enumerate}

A synthetic population is a generated population with specific individual attributes that add up to the regional characteristics as a whole. We generated the synthetic population using a software called PopulationSim (PopulationSim 2021). We used a ``seed'' table, which represented information of a subset of the population, and a set of ``targets'', which represented demographic data of smaller areas of the region, to run PopulationSim (Lant 2021). The zonal socioeconomic data file stores zonal characteristics regarding household, worker, and other activity type information. This file was created using data from Wasatch Front Regional Council (WFRC) (WFRC 2019), Utah Automated Geographic Reference Center (AGRC 2021), and the synthetic population when necessary. The skims are large matrices showing travel times and costs between every set of zones within the area of study. Included in these skims were further details regarding differences in modes, distances, wait times, etc. (Lant 2021). We used pre-generated skims from WFRC (2019), with some slight adjustments, in our run of the ActivitySim model.

After generating the necessary input files, we calibrated and validated the ActivitySim model to better represent decisions made in the Salt Lake region. The process of calibrating and validating the ActivitySim model to the Salt Lake region was conducted by Lant (2021). The purpose of the calibration and validation was to ensure that the outputs generated by ActivitySim matched target regional values. Specifically, trip productions, trip distributions, and mode choices were tested to match the given target values from the four-step model from WFRC (2019). The details behind the exact calibration and validation process are discussed by Lant (2021), and therefore will not be described in detail within this paper. However, we did conduct one additional calibration measure beyond that which Lant (2021) completed. Due to some slight adjustments made after the initial calibration of ActivitySim, we elected to re-calibrate ActivitySim's tour mode choice parameters. Using the 2012 household travel survey as our targets, we improved ActivitySim to model a more accurate total modal distribution of the region (WFRC 2019). The fully calibrated and validated ActivitySim model was then ready to run and generate activity plans for the case study region.

\hypertarget{meth-beam}{%
\section{BEAM as the Multi-agent Simulation Tool}\label{meth-beam}}

BEAM stands for Behavior, Energy, Autonomy, and Mobility and is a multi-agent simulation tool being developed by Lawrence Berkeley National Laboratory and UC Berkeley Institute for Transportation Studies (BEAM 2022). As an extension of MATSim, it simulates individual agents using both within day replanning and across-day replanning to maximize individual utility. Overall, BEAM shares many of the same advantages and disadvantages of most multi-agent simulations as described in Section \ref{lit-mas}.

\hypertarget{novel-beam}{%
\subsection{Novel Modes in BEAM}\label{novel-beam}}

BEAM was chosen as the multi-agent simulation in this research because of its integration with transportation network companies (TNCs), or ride hail and pooled ride hail vehicles. (BEAM also supports plug-in electric vehicle modeling, however, this feature was not used within our research.) Along with the TNC type mode options, BEAM supports many of the regular choices as well, such as car, walk, bike, walk-to-transit, and drive-to-transit. Default BEAM uses a simple multinomial logit choice model for determining which mode any particular agent will use on any particular trip. Only a few variables are used to calculate the modal alternative: cost, travel time, number of transfers, and an alternative specific constant (ASC) (BEAM 2022).

BEAM was also chosen as the multi-agent simulation in this research because of how it implements ride hailing vehicles. BEAM uses a greedy asynchronous ride hail matching algorithm that also supports pooled trips. The algorithm works by first, requiring agents to send a request for a ride hail vehicle, and then by second, matching the closest vehicle to that agent. For the algorithm to work, BEAM requires the modeler to input a ride hail vehicle fleet. This fleet is a simply file that describes the number of ride hailing vehicles available in the region, their starting locations, their working hours, their seating capacity, and other specifications. BEAM assigns these vehicles to the roadway network, where they ``roam'' the streets awaiting requests. The ride hail algorithm permits a more realistic ride hail modeling structure. For example, agents make a request to take a ride hail vehicle, expect a variable wait time dependent on their geographic location, and may not even be able to take the vehicle if there is no availability! All these attributes are similar to how using ride hail is in real life, and represent the true advantages to modeling ride hail with BEAM.

\hypertarget{meth-beam-link}{%
\subsection{Linking the Mode Choice of ActivitySim and BEAM}\label{meth-beam-link}}

In order to use BEAM in conjunction with ActivitySim, however, its mode choice model was updated to be more consistent with ActivitySim's mode choice model. More specifically, three changes were made to the choice structure:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Adding a Tour Purpose Attribute
\item
  Adding Person, Path, and Location Attributes to the Utility Equation
\item
  Adding New Modal Alternatives
\end{enumerate}

First, a tour purpose attribute was added at the trip level, to be used when making trip-based modal decisions. ActivitySim's default utility parameters are segmented by tour purpose, auto ownership, and mode; therefore, adding a tour purpose level attribute was essential to calculating the mode choice utility similar to ActivitySim.

Second, multiple person, path, and location related attributes were added to use in the mode choice utility equations. The MTC example of Activityim (the example referenced in this research) uses 25 different variables in the utility calculation (MTC 2012). So, BEAM was adjusted to use values like wait time, transit proximity, distance, age, household size, and more on top of the default variables to calculate modal utility. This was done by gathering path and location variables from the BEAM router and person level variables from the input files. ASCs were copied directly from the MTC ActivitySim example, and then calibrated later on. Overall, one input file was created which housed all path, person, and location type parameters on a tour purpose, auto ownership, and modal level.
The last major adjustment made to the BEAM software was adding new modal alternatives. The most important difference between the ActivitySim modal options and the BEAM modal options is the inclusion of carpooling vehicles (HOV2 and HOV3). HOV2 means High Occupancy Vehicle with 1 passenger (2 people in the vehicle) and HOV3 means High Occupancy Vehicle with 2 or more passengers (at least 3 people in the vehicle). The BEAM software was adjusted to include HOV2 and HOV3 type modes, including a distinction between drivers and passengers of those vehicles. Within the code, HOV2 and HOV3 modes were provided as modal options by transforming an existing car option into an HOV option. This allowed car travel statistics to be transferred over to the carpooling modes, which were essential to calculating the utility.

BEAM's default mode choice model was adjusted dramatically to be more closely aligned with how the MTC example of ActivitySim handles mode choice (MTC 2012). As a way to better understand the complexity of the new mode choice model in BEAM, two pseudocode algorithms are provided. Specifically, the algorithms are meant to provide clarification on how BEAM's new mode choice model works.

Algorithm 1 describes the process behind determining the mode choice alternatives for each agent. This process occurs for every agent for every trip. Two procedures are presented within the first algorithm. The first procedure is called DetermineHOVAlternatives. This procedure was added to the BEAM code as a way to include carpooling options. In this procedure the HOV alternatives are created from already existing options created by the R5 router (Conveyal 2022). (The R5 routing engine helps BEAM accomplish multi-modal routing). Basically if a car, HOV2, or HOV3 mode is already created from the router, then both HOV2 and HOV3 options are provided. If car is not provided by the router, then passenger HOV options are provided. Passenger HOv modes, called HOV\_TELEPORT, are completed by teleporting agents from origin to destination. The second procedure within Algorithm 1 describes the process behind determining the final modal alternatives. It essential states that if the current mode is already chosen, then that mode remains as the only alternative to choose from. However, if no mode is currently chosen for the trip, the router, ride hailing, and HOV alternatives are combined and presented as the final alternatives to choose from.

\begin{algorithm} [tph]
\caption{Algorithm for Determining Mode Choice Alternatives in BEAM}
\begin{algorithmic}[1]
\Require
\State $i : origin$
\State $j : destination$
\State $n: agent$
\State $N: population$
\State $t : trip $
\State $P : plan$
\State $\vec{R}(i,j) : Router\: alternatives$
\State $\vec{RH}(i,j) : Ridehail\:alternatives$
\State $\vec{H}(i,j) : HOV\:alternatives$
\State $\vec{M}(i,j) : Final\:modal\:alternatives$
\State $C : Current\:Mode$
\State $I : Trip\:Index$
\vspace{4pt}\hrule\vspace{5pt}

\State $\vec{R} \equiv \vec{R}(i,j)$
\State $\vec{RH} \equiv \vec{RH}(i,j)$
\State $\vec{H} \equiv \vec{H}(i,j)$
\State $\vec{M} \equiv \vec{M}(i,j)$
\For {$n \in N$}
\For {$t \in P$}

\Procedure {DetermineHOVAlternatives}{$\vec{R}$, $C$}
\If {$C=None$}
  \If {$\vec{R} \ni CAR$}
    \State $\vec{H} \gets (HOV2,HOV3)$
  \ElsIf {$\vec{R} \ni HOV2$}
    \State $\vec{H} \gets (HOV3)$
  \ElsIf {$\vec{R} \ni HOV3$}
    \State $\vec{H} \gets (HOV2)$
  \ElsIf {$\vec{R} \ni WALK$}
    \State $\vec{H} \gets (HOV2\_TELEPORT, HOV3\_TELEPORT)$
  \EndIf
\Else
  \State $\vec{H} \gets None$
\EndIf
\EndProcedure
\Statex
\algstore{myalg}
\end{algorithmic}
\end{algorithm}

\addtocounter{algorithm}{-1}
\begin{algorithm}
\caption{continued}
\begin{algorithmic} [1]
\algrestore{myalg}
\Procedure {DetermineFinalModalAlternatives}{$\vec{R}$, $\vec{RH}$, $\vec{H}$, $C$, $I$}
\If {$C = DRIVE\_TRANSIT \lor BIKE\_TRANSIT$}
  \If {$I = 0$}
    \If {$C = DRIVE\_TRANSIT$}
      \State $\vec{M} \gets (DRIVE\_TRANSIT)$
    \Else
      \State $\vec{M} \gets (BIKE\_TRANSIT)$
    \EndIf  
  \Else
    \State $\vec{M} \gets (WALK\_TRANSIT, RIDEHAIL\_TRANSIT)$
  \EndIf
\ElsIf {$C = WALK\_TRANSIT \lor RIDEHAIL\_TRANSIT$}  
  \If {$C = WALK\_TRANSIT$}
    \State $\vec{M} \gets (WALK\_TRANSIT)$
  \Else
    \State $\vec{M} \gets (RIDEHAIL\_TRANSIT)$
  \EndIf
\ElsIf {$C = HOV2\_TELEPORT \lor HOV3\_TELEPORT$}  
  \If {$C = HOV2\_TELEPORT$}
    \State $\vec{M} \gets (HOV2\_TELEPORT)$
  \Else
    \State $\vec{M} \gets (HOV3\_TELEPORT)$
  \EndIf
\ElsIf {$C = CAR$}
  \State $\vec{M} \gets (CAR)$
\Else
  \State $\vec{M} \gets \vec{R} + \vec{RH} + \vec{H}$  
\EndIf  
\EndProcedure
\EndFor
\EndFor
\Statex
\end{algorithmic}
\end{algorithm}

Algorithm 2 describes the process within BEAM for how one modal alternative is selected among all the mode choice options. Algorithm 2 is basically the pseudocode behind the process that occurs with the mulitnomial logit function. Then, after using the multinomial logit formula, the probabilities that were calculated are sampled and one final mode choice alternative is selected!

\begin{algorithm}
\caption{Algorithm for Selecting Final Modal Alternative in BEAM}
\begin{algorithmic}[1]
\Require
\State $i : origin$
\State $j : destination$
\State $n: agent$
\State $N: population$
\State $t : trip $
\State $P : plan$
\State $\vec{A}: attributes\:of\:agent$
\State $a: attribute\:value$
\State $\vec{M}(i,j) : Modal\:alternatives$
\State $m : alternative \in M(i,j)$
\State $\vec{U}(\vec{M}(i,j),\vec{A}):Utilities\:for\:alternatives$
\State $u: utility \in \vec{U}(\vec{M}(i,j),\vec{A})$
\State $\vec{c}: attribute\:coefficients$
\State $\mathds{P}: probability$
\State $Mode: chosen\:mode\:for\:agent\:(n)\:on\:trip\:(t)$
\State $f(\vec{X}):$
This function takes a vector of modes and  their probabilities of being chosen. With those probabilities it builds them into a cumulative distribution function, generates a random number and then drops the mode with the closest probability. This process continues until only one mode is left.
\vspace{4pt}\hrule\vspace{5pt}

\State $\vec{M} \equiv \vec{M}(i,j)$
\State $\vec{U} \equiv \vec{U}(\vec{M},\vec{A})$
\For {$n \in N$}
\For {$t \in P$}\Procedure {DetermineFinalModalAlternative}{$\vec{M}$, $\vec{A}$, $\vec{c}$}
\For {$m \in \vec{M}$}
  \State $u \gets \sum_{a\in \vec{A}} a \times c_a$
  \State $\vec{U} += [m,u]$
\EndFor
\State $S \gets \sum_{u\in \vec{U}}e^u$
\For {$u \in \vec{U}$}
    \State $\mathds{P}(u)\gets e^u / S$
    \State $\vec{B} +=[m, \mathds{P}(u)]$
\EndFor 

\State $Mode \gets f(\vec{B})$

\EndProcedure

\EndFor
\EndFor
\Statex
\end{algorithmic}
\end{algorithm}

\hypertarget{beam-configured-to-the-case-study-region}{%
\subsection{BEAM Configured to the Case Study Region}\label{beam-configured-to-the-case-study-region}}

BEAM was configured to the case study region by gathering the inputs, validating the utility parameter values, and calibrating the utility ASC values to the region. Gathering the BEAM input files were easy simply because the outputs generated by the calibrated ActivitySim model were used as the inputs to BEAM. Only a slight formatting change was made to these inputs; and since they were generated by the calibrated ActivitySim model, they were already configured to the Salt Lake region.

The utility parameter values used in BEAM's new mode choice model were copied directly from MTC's implementation of ActivitySim (MTC 2012). MTC's implementation of ActivitySim was designed for the San Francisco, California region. Logically, travel behaviors such as travel time, travel distance, and number of transfers should affect people in different regions in similar ways. However, as a way to validate the use of ActivitySim's path utility coefficients in the Salt Lake region, these values are compared to values from the Utah Statewide model, the WFRC travel demand model, and the NCHRP Report 716. The Utah Statewide model is useful as it provides a rough idea of the influence of path variables in Utah as a whole (UDOT 2021). The WFRC model model is a useful comparison as it predicts travel behavior for the same region of study used in this research project (WFRC 2019) . NCHRP Report 716 provides a rough idea of what parameter values should look like for a generalized modeling point of view (Cambridge Systematics et al. 2012). Overall, comparing these three sets of path parameter values with the MTC ActivitySim parameter values used in BEAM helps ensure that the the utility parameters are valid.

Figure \ref{fig:hbw} shows the comparison of the path utility parameter values between all four models for home-based work trips. For the egress time, in vehicle travel time (IVTT), the number of transfers, transfer time, and the wait times, MTC's ActivitySim seems to use a very similar coefficient value as the other three models. The largest discrepancy exists with short and long walking distances. ActivitySim seems to use a value almost ten fold that of the other models. This occurs because the WFRC and Utah Statewide models caps walking distance whereas ActivitySim instead gives a high penalty for long walking distances. With this clarification, it is clear to see that ActivitySim's path coefficient values do not require calibration and were left as is.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/hbw-1} 

}

\caption{Home-based work mode choice path coefficients model comparison.}\label{fig:hbw}
\end{figure}

Figure \ref{fig:hbs} shows the comparison of the path utility parameter values between all four models for home-based school trips. Similar to the home-based work analysis, for the egress time, IVTT, transfer time, and the wait times, ActivitySim seems to use a very similar coefficient value as the other three models. Again, the largest discrepancy exists with short and long walking distances. Since this is simply a difference between how walk distance is modeled, the discrepancy is ignored. In addition, the other three models did not have information on number of transfers. As a result, there is no comparison done with number of transfers. ActivitySim's path coefficient values do not require calibration for the home-based school parameters.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/hbs-1} 

}

\caption{Home-based school mode choice path coefficients model comparison.}\label{fig:hbs}
\end{figure}

Lastly, Figure \ref{fig:hbo} shows the comparison of path utility parameter values between all four models for home-based other trips. Again, besides for walk distance all variables seem to be similar between all four models. An interesting point is that for models other than ActivitySim, the cost coefficient varies greatly. Fortunately, ActivitySim bases the cost coefficient on each individual's value of time so this is not a concern. Overall, for all purpose types the coefficients used by ActivitySim are similar enough to other models that exist, and therefore do not require calibration.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/hbo-1} 

}

\caption{Home-based other mode choice path coefficients model comparison.}\label{fig:hbo}
\end{figure}

After validation was completed, the last step in order to run BEAM with the case study region was to calibrate the ASC values of the mode choice model. BEAM calibration was completed by iteratively updating the ASC values using Equation \eqref{eq:eqcalib}. The number of trips totaled by tour purpose, auto ownership, and modal alternative were compared between the BEAM results and the ActivitySim results and used to adjust each ASC value. After 15 iterations of Equation \eqref{eq:eqcalib} were completed on the ASC values, the BEAM trip values were within a reasonable range to the ActivitySim target shares. Figure \ref{fig:fig-beam-calib} shows the progress of the calibration targets with the final shares after each iteration.

\begin{equation}
  NewASC = OldASC + ln(\frac{Trips_{ASIM}}{Trips_{BEAM}}) \label{eq:eqcalib}
\end{equation}

\begin{figure}

{\centering \includegraphics[width=1\linewidth]{pics/BeamCalib} 

}

\caption{BEAM mode choice ASC calibration}\label{fig:fig-beam-calib}
\end{figure}

\hypertarget{meth-scenarios}{%
\section{Case Study Scenarios}\label{meth-scenarios}}

After BEAM validation and BEAM calibration were completed for the case study region, a series of different BEAM experiments were run. Each experiment was run for a total of 12 iterations using a 15\% population size. Ten different experiments were conducted, each with a unique ActivitySim-to-BEAM mode choice combination. Table \ref{tab:tbexperiments} provides a short name description of the 10 different scenarios.

\begin{table}
\caption{ActivitySim-to-BEAM Mode Choice Combination Scenario Names}
\renewcommand{\arraystretch}{2}
\[
  \begin{array}{cc|ccc}
    &\multicolumn{1}{c}{} & \multicolumn{2}{c}{\text{ActivitySim}} \\
    && \text{Plans without Ride Hail} & \text{Plans with RideHail}\\
    \hline
    & \text{None} & No RideHail & AsimRideHail \\
    \smash{\rotatebox[origin=c]{90}{\text{BEAM}}} & \text{RideHail} & \makecell{BeamRideHail:Path \\ BeamRideHail:PPL} & \makecell{AsimBeamRideHail:Path \\ AsimBeamRideHail:PPL} \\
    & \text{All} & \makecell{BeamAll:Path \\ BeamAll:PPL} & \makecell{AsimBeamAll:Path \\ AsimBeamAll:PPL}
  \end{array}
\]
\label{tab:tbexperiments}
\end{table}

To better describe the meaning of each scenario in Table \ref{tab:tbexperiments}, we explain the three mode choice descriptors that were altered in each scenario. The first descriptor references to how ActivitySim's modes were configured, which in Table \ref{tab:tbexperiments} is labeled under \emph{ActivitySim} as \emph{Plans without RideHail} and \emph{Plans with RideHail}. In the naming convention, any name starting with \emph{Asim} refers to any scenario where ride hail was included in the input plans from ActivitySim, and any name without \emph{Asim} refers to any a scenario where ride hail was excluded from the inputs plans from ActivitySim. To further explain, the ActivitySim ride hail nesting option as shown in Figure \ref{fig:fig-asim-nest} existed in one run of ActivitySim (\emph{Plans with RideHail}), whereas in the other it did not (\emph{Plans without RideHail}). Since the daily activity plans generated by ActivitySim were converted to BEAM inputs, this descriptor explains the initial mode choice selections for all trips entered into BEAM. By creating this distinction, we hope to better understand how heavily a multi-agent simulation prioritizes ride hail as opposed to an activity-based model.

The second descriptor present in Table \ref{tab:tbexperiments} is labeled under \emph{BEAM} as \emph{None},\emph{RideHail}, and \emph{All}. These three variables explain which mode choice structure was used in BEAM. These variables also explain which modal alternatives were available for choice within BEAM. The \emph{None} category represents a run of BEAM where all modal innovation was turned off. This means that no mode choice was available, and the modes from the initial input plans remained constant across each iteration. This mode choice structure was used for the \emph{NoRideHail} and \emph{AsimRideHail} scenarios. The \emph{RideHail} category represented a run of BEAM where modal innovation was partially turned off. All trips that originally took car or carpool modes had modal innovation turned off; their modes were locked. All trips that originally took walk-transit or drive-transit modes, however, were given the option to switch to ride hail transit. Also, all walk modes were given the option to switch to ride hail. \emph{RideHail} represents the version of BEAM where ride hail and ride hail transit modes were only given to non-car dependent agents. The \emph{BeamRidehail} and \emph{AsimBeamRideHail} type scenarios implemented the \emph{RideHail} BEAM mode choice structure. Finally, the \emph{All} category represents a run of BEAM where modal innovation was turned on, and all modal alternatives were available for choice. This means that within-day replanning as well as across-day replanning was turned on, and agents could change their trip modes to maximize their utility. The \emph{BeamAll} and \emph{AsimBeamAll} type scenarios implemented the \emph{All} BEAM mode choice structure. Overall, by using different mode choice structures within BEAM, we hope to better understand how altering available modal alternatives affects ride hail service capabilities.

Finally, the third descriptor present in Table \ref{tab:tbexperiments} is labeled as either \emph{Path} or \emph{PPL} and explains which utility variables were used to calculate modal utility. Three difference variations were present: \emph{Path}, \emph{PPL}, and empty. The empty option means no utility parameters were used in determining mode choice, because modal innovation as turned off completely. The \emph{Path} option represented the version of BEAM that only used path type utility parameters to calculate mode choice utility; location and person type variables were not used. The \emph{PPL} option represented the version of BEAM that used all utility parameter types (Path, Person, and Location) to calculate the mode choice utility. As ActivitySim uses path, person, and location type variables to determining modes, this version of BEAM also uses all three types of variables. Section \ref{meth-beam-link} describes how BEAM was configured to use all these variable types. By altering which variables were used in the utility equation, We hope to better understand the effect different types of utility parameters have on mode choice and ride hail service capabilities.

Overall, we ran 10 different scenarios each with a slightly different ActivitySim-to-BEAM mode choice combination. Each scenario is built from which modes were included in the input plans, which modal alternatives were available for choice, and which utility parameter types were used to calculate the mode choice utility. By altering these three different mode choice characteristics, we hope to better understand the affect a linked activity-based model and multi-agent simulation have on the service capabilities of a novel mode.

\hypertarget{results}{%
\chapter{Results}\label{results}}

We ran 10 different ActivitySim-to-BEAM mode choice combinations and processed their ride hail statistics and service capabilities into results. Specifically, we obtained ridership (Section \ref{res-ridership}) and wait time (Section \ref{res-waits}) information from the final iteration of BEAM for each scenario. Alongside each other, these results should shed some light on how differing mode choice structures between an activity-based model and a multi-agent simulation affect the forecasting of novel modes.

\hypertarget{res-ridership}{%
\section{Ridership}\label{res-ridership}}

As novel modes, like ride hail, become more popular it is ever more important to accurately predict ridership. Predicting accurate ridership totals will allow for efficient driver allocation, decreased traffic congestion, and improved rider experience (Chen, Thakuriah, and Ampountolas 2021). Table \ref{tab:ridership} shows the ridership percentages of ride hail, pooled ride hail, and ride hail transit modes for all 10 mode choice combinations. Correctly understanding the results of Table \ref{tab:ridership} may help forecasters predict ridership numbers more effectively in the future. To accurately interpret the results of Table \ref{tab:ridership} however, we must determine the best method to reading the table. The many slight variations in each mode choice structure makes interpreting the results complicated.

\begin{table}

\caption{\label{tab:ridership}Percent ride hail ridership by mode choice combination scenario.}
\centering
\resizebox{\linewidth}{!}{
\begin{tabular}[t]{lrrrr}
\toprule
Scenario Name & Ride Hail & Pooled Ride Hail & Ride Hail to Transit & Total\\
\midrule
NoRideHail & 0.000 & 0.000 & 0.000 & 0.000\\
AsimRideHail & 0.024 & 0.003 & 0.000 & 0.027\\
BeamRideHail:Path & 3.814 & 2.120 & 0.249 & 6.183\\
BeamRideHail:PPL & 1.615 & 3.327 & 0.395 & 5.337\\
AsimBeamRideHail:Path & 1.824 & 3.465 & 0.461 & 5.750\\
\addlinespace
AsimBeamRideHail:PPL & 3.980 & 2.293 & 0.323 & 6.596\\
BeamAll:Path & 0.423 & 0.145 & 0.003 & 0.571\\
BeamAll:PPL & 0.280 & 0.567 & 0.011 & 0.858\\
AsimBeamAll:Path & 0.312 & 0.413 & 0.008 & 0.733\\
AsimBeamAll:PPL & 0.280 & 0.536 & 0.014 & 0.830\\
\bottomrule
\end{tabular}}
\end{table}

We propose two methodologies to interpreting the results of Table \ref{tab:ridership} as well as the other results presented in Section \ref{res-waits}.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Comparing scenarios individually
\item
  Comparing scenarios collectively
\end{enumerate}

\hypertarget{res-ind}{%
\subsection{Comparing Scenarios Individually}\label{res-ind}}

To provide an example of using the first methodology, we compare the AsimRideHail scenario with the other nine scenarios. To begin, the AsimRideHail scenario compared with the NoRideHail scenario helps us understand how ActivitySim estimates ridership. Since the AsimRideHail scenario and NoRideHail scenario are run with BEAM's modal innovation turned off, we can assume that these results mimic those output from ActivitySim. Obviously the NoRideHail scenario will produce no ride hail results. Looking at the AsimRideHail scenario though, we clearly see the level at which ActivitySim predicts ridership. ActivitySim estimates that of the entire population's mode choice, 0.0024\% are ride hail modes, 0.003\% are pooled ride hail modes, and 0.000\% are ride hail transit modes. Since 0.000\% are ride hail transit trips, we conclude that ActivitySim may struggle at creating this particular mode option.

Comparing the AsimRideHail scenario with the \emph{RideHail} type scenarios (BeamRideHail and AsimBeamRideHail), less direct conclusions can be made. Of course, we obviously see that the ridership totals for all ride hail modes in all four scenarios are greater than the ridership of the AsimRideHail scenario. We can conclude that the BEAM mode choice structure which allows only ride hail modal innovation will predict higher ridership totals than ActivitySim. However, since each scenario presents a unique total ridership for each ride hail mode, we cannot draw any more conclusions by only referencing the results of the AsimRideHail scenario.

Comparing the AsimRideHail scenario with the BeamAll scenarios we see the effectiveness of BEAM at estimating ride hail modes without ride hail being selected in the initial plans. Both BeamAll scenarios display a large increase in total ride hail ridership when compared with the AsimRideHail scenario. Comparing the \emph{All} type scenarios (BeamAll and AsimBeamAll), we notice that BEAM will estimate higher ridership totals than ActivitySim, independent of whether or not the input plans include ride hailing modes. Comparing the AsimRideHail scenario with the BeamAll:Path and AsimBeamAll:Path scenarios we see a glimpse at how BEAM estimates ride hail modes with only path variables, independent of whether or not the input plans include ride hail. A significant increase in ridership in these two scenarios is displayed when compared with the AsimRideHail scenario. This may highlight the importance of including path variables to estimate ride hail ridership.

Finally, comparing the AsimRideHail scenario with the AsimBeamAll:PPL scenario we learn about the inter-workings of the BEAM mode choice that is most consistent with ActivitySim. The BeamAll:PPL and AsimBeamAll:PPL scenarios reference a BEAM mode choice structure which uses all modal options and all utility parameters. In other words, this BEAM mode choice structure is the one most aligned with that of ActivitySim. By comparing AsimBeamAll:PPL with the AsimRideHail scenario, we see how ride hail statistics \emph{differ} when modeled with an activity-based model than with a multiagent simulation. Looking at the differences between the the AsimRideHail and AsimBeamAll:PPL scenarios in Table \ref{tab:ridership}, we see an increase of 0.256\% of total ride hail modes, 0.533\% of total pooled ride hail, and 0.014\% of total ride hail transit modes. Overall, a significant increase in ridership was achieved by simply turning on modal innovation in BEAM. Overall, we conclude that BEAM is more prone to estimating higher ridership totals for ride hailing modes than ActivitySim.

Comparing other scenarios between each other individually may help us draw more conclusions, especially with the \emph{RideHail} type scenarios, however, analyzing every combination of individual scenario is beyond the extent of this paper. As a result, we instead move to comparing these scenarios collectively to better understand the ridership results.

\hypertarget{res-col}{%
\subsection{Comparing Scenarios Collectively}\label{res-col}}

Looking at scenarios collectively, and comparing them with each other and with other collective groups will extract deeper results in our research. Section \ref{meth-scenarios} and Table \ref{tab:tbexperiments} describe the following three different descriptors which will be used as the collective groups:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  ActivitySim Mode Choice / Input Plans
\item
  BEAM Mode Choice
\item
  BEAM Utility Variables
\end{enumerate}

As shown in Table \ref{tab:ridership}, minimal differences in ridership is produced between ActivitySim mode option outputs (scenarios with the \emph{Asim} prefix vs.~without). For example, comparing the \emph{RideHail} type scenarios we see no direct correlation with ridership and input plans. With the BeamRideHail:Path and AsimBeamRideHail:Path, we see that when ride hail doesn't exist in the input plans, the total ride hail type modes (ride hail, pooled ride hail, and ride hail transit) complete about 6.2\% of total modal distribution whereas when ride hail type modes are included, total ride hail type modes complete about 5.8\% of total modal distribution. Although both project an enormous share using ride hail, the scenario with ride hail in the input plans projects more ride hail ridership. Oddly enough, however, when comparing the BeamRideHail:PPL and AsimBeamRideHail:PPL scenarios, the scenario with ride hail in the input plans projects less ride hail ridership. In these two scenarios we see that when ride hail doesn't exist in the input plans, the total ride hail type modes complete about 5.3\% of total modal distribution whereas when ride hail type modes are included, total ride hail type modes complete around 6.6\% of total modal distribution. Overall, no direct correlation between ride hail ridership totals and input plans is seen between \emph{RideHail} type scenarios. Then, when examining BeamAll:PPL and AsimBeamAll:PPL, the output ridership percentages are almost identical. When using the BEAM mode choice model that is most consistent with that of ActivitySim, BEAM estimates ride hail ridership at the same level with or without ride hail in the input plans. However, when examining BeamAll:Path and AsimBeamAll:Path we see that when only path variables are used in the utility equation, ridership is not identical between ActivitySim mode options. BeamAll:Path shows an increase in ridership for ride hail modes and a decrease in pooled ride hail and ride hail transit modes than in AsimBeamAll:Path. Initial plan sets play a role in who selects pooled and transit ride hail trips when only using path variables to determine mode choice. We hypothesize that with the lack of person attributes in the utility equation, pooled and transit ride hail options look less appealing. Collectively, comparing Scenarios AsimRideHail, AsimBeamRideHail:Path, AsimBeamRideHail:PPL, AsimBeamAll:Path, and AsimBeamAll:PPL against Scenarios NoRideHail, BeamRideHail:Path, BeamRideHail:PPL, BeamAll:Path, and BeamAll:PPL we see similar results among similar mode choice structures. Although minimal shifts in total ridership were noticed in most cases, as a whole, we determine that changing the ActivitySim mode options has no \emph{significant} change in final ride hail ridership; at least not a traceable change.

However, when analyzing the BEAM mode options from Table \ref{tab:ridership} as described in Table \ref{tab:tbexperiments}, obvious results are seen. The \emph{None} type scenarios (NoRideHail and AsimRideHail) produce little to no agents choosing ride hail. The reasoning behind this is described in Section \ref{res-ind}. On the other hand, the \emph{RideHail} type scenarios (BeamRideHail and AsimBeamRideHail) produce the largest number of ride hail modes amoung BEAM mode choice structures! This is because with the \emph{RideHail} type mode choice, walking individuals only have the option to continue walking or take ride hail. Taking a ride hail mode is usually more attractive than walking a long distance; and because of this limitation, an excessive number of agents switch to using ride hail. Finally, the \emph{All} type scenarios (BeamAll and AsimBeamAll) produce a significantly larger number of ride hail modes than the \emph{None} type. According to BEAM, ride hail type modes are more attractive than initially projected by ActivitySim. Ridership is affected significantly by which mode choice structure is used by BEAM; this conclusion is clear.

Finally, we can analyze the effect the BEAM utility variables have on ride hail ridership totals. Two different options are shown: Path and PPL. To best understand the effect the utility variables have, we compare similar BEAM structures with the utility variables adjusted. For example, BeamRideHail:Path and BeamRideHail:PPL can be compared together. In this case, the ride hail ridership decreases (3.814\% to 1.615\%) when using path, person, and location variables, but increases with pooled ride hail (2.120\% to 3.327\%) and ride hail transit (0.249\% and 0.395\%) when using path, person, and location variables. This same pattern occurs when analyzing the difference between the BeamAll:Path and BeamAll:PPL, and AsimBeamAll:Path and AsimBeamAll:PPL scenarios. For some oddity, AsimBeamRideHail:Path and AsimBeamRideHail:PPL follow an opposite pattern where ride hail increases (1.824\% to 3.980\%) and ride hail pooled decreases (3.465\% to 2.293\%) and ride hail transit decreases (0.461\% to 0.323\%) when using path, person, and location variables. Similarly, with all comparisons except between BeamRideHail:Path and BeamRideHail:PPL, we see that total ride hail percentages increases when using all path, person, and location variables to estimate ride hail. We acknowledge that not all scenarios follow the same pattern, but conclude that in general, using only path variables to estimate ride hail ridership will result in less total ride hail ridership than if using all path, person, and location type variables.

\hypertarget{summary}{%
\subsection{Summary}\label{summary}}

Analyzing ridership among different mode choice structures has highlighted some important conclusions:

\begin{itemize}
\item
  Ride hail is affected significantly by which mode choice structure is used by BEAM.

  \begin{itemize}
  \item
    The \emph{RideHail} BEAM mode structure will estimate much more ride hail usage than the other versions.
  \item
    The \emph{All} BEAM mode structure is prone to estimating higher ride hail usage than ActivitySim.
  \end{itemize}
\item
  Initial plans, and whether or not they include ride hail, do not significantly affect the level at which BEAM estimates ride hail.
\item
  Path variables affects ridership; and using all path, person, and location type variables will increase total ridership.
\item
  With the lack of person attributes in the utility equation, pooled and transit ride hail options look less appealing.
\end{itemize}

By analyzing wait times with a similar approach, individually and collectively, many of these conclusions are verified.

\hypertarget{res-waits}{%
\section{Wait Times}\label{res-waits}}

Wait time is one of the most important factors people use when determining their travel mode. When traveling, long wait times are seen as burdensome; short wait times are also seen as burdensome when compared to modes with zero wait time. Therefore, estimating accurate wait times would be helpful to forecasters in understanding the usage of novel modes. Ride hail, in particular, is an up and coming novel mode where wait time definitely plays a factor in its usage. According to Dong (2020), wait time for ride hailing modes seems less burdensome than wait time for transit modes. This behavior may lead to higher ridership for ride hail vehicles than for transit vehicles. Since ridership hinges on wait time among other things, the accurate estimation of wait times (and other service capabilities) in essential to forecasting novel modes like ride hail.

Figure \ref{fig:waits} shows the results of wait times for ride hail vehicles for the 10 scenarios that were run. (The NoRidehail scenario, is not shown because no ride hail vehicles were present in that scenario). By analyzing the wait times with violin plots, we analyze a detailed distribution of the ride hail wait times for each scenario.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/waits-1} 

}

\caption{Distribution of ride hail wait times by mode choice combination scenario.}\label{fig:waits}
\end{figure}

\hypertarget{comparing-scenarios-individually}{%
\subsection{Comparing Scenarios Individually}\label{comparing-scenarios-individually}}

As was done in Section \ref{res-ind}, we compare some scenarios individually with each other. To start, we look at the differences that exist between AsimRideHail and AsimBeamAll:PPL. As explained when looking at ridership, this comparison explains the inter-workings of the BEAM mode choice model that is most consistent with ActivitySim. As ridership experiences an increase between these two scenarios, wait times also increase when using the BEAM mode choice model (minimum wait time increases from 0.7 to 1 minute, and mean wait time increases from 7.8 to 9.3 minutes). A noticeable increase in wait time was achieved by simply turning on modal innovation in BEAM. Since higher wait time suggest higher ridership, we again conclude that BEAM is more prone to estimating more ride hail usage than ActivitySim.

Comparing AsimRideHail and BeamAll:PPL we see the lack of impact that ride hail in the initial plans has on effective ride hail usage. The wait time mean may have increased from 7.8 to 8.4 minutes, but the maximum wait time decreased from 20.8 to 18.3 minutes! Although no ride hail existed in the input plans, BEAM was effectively able to calculate the usage of more ride hail vehicles with less maximum wait times. Comparing AsimRideHail with BeamAll:Path and AsimBeamAll:Path, we can learn of the effect using only Path variables has on wait time. In both BeamAll:Path and AsimBeamAll:Path, mean wait time increases when compared with AsimRideHail, but AsimBeamAll:Path displays a larger maximum wait time than BeamAll:Path and AsimRideHail. This may highlight the importance of also using person and location variables to estimate ride hail wait time. The individual comparisons between AsimRideHail and the \emph{RideHail} type scenarios are not included in this analysis, but can be personally examined using the same technique.

\hypertarget{comparing-scenarios-collectively}{%
\subsection{Comparing Scenarios Collectively}\label{comparing-scenarios-collectively}}

As with ridership, analyzing wait times on a collective scale sheds additional light in the effect mode choice has on ride hail service capabilities. To start we analyze the effect the input plans have on ride hail wait times. Collectively, comparing the scenarios with the \emph{Asim} prefix against the scenarios without, we see a slight difference in maximum wait times. For example, Scenarios AsimBeamRideHail:PPL, AsimBeamAll:Path, and AsimBeamAll:PPL have higher maximum wait times when compared to their counterparts in BeamRideHail:PPL, BeamAll:Path, BeamAll:PPL. Although this is true, when comparing the mean values of those same scenarios, relatively no difference exists. Its hard to conclude the exact effect that having ride hail in the input plans has, but we propose a hypothesis. We suppose that the existence of ride hail in the initial plans will not affect \emph{most} ride hail wait times. With the exception of the maximum value, similar wait time distributions and means exist between different input ride hail wait times. The presence of ride hail in the input plans may, however, affect those few riders who start with ride hail in their input plans; maybe they are the users with longer wait times. There is insufficient data to conclude this though, and even so, the majority of wait time calculations are not affected. As concluded by analyzing ridership values, as a whole we determine that changing the ActivitySim mode options creates insignificant changes in the final ride hail performance in BEAM.

Alternately, comparing different BEAM mode options does significantly affect ride hail wait times. The \emph{None} type scenario (AsimRideHail) has the largest spread of wait times, the lowest mean wait time, and is ``bottom heavy'' -- referring to the fact that a major cluster of users wait less than 7.5 minutes. The \emph{All} type scenarios have higher mean wait times (\textasciitilde9.3 minutes) than the \emph{None} type and lower mean wait times than the \emph{RideHail} type. Neither top nor bottom heavy, the \emph{All} type scenarios seem to have a more even spread in wait times, ranging from 0.4 to 21 minutes (depending on the exact mode choice structure). BEAM seems to paint ride hail alternatives as more desirable than ActivitySim, as more users are willing to wait longer (12 to 18 minutes in the \emph{All} scenarios). This is especially true with the \emph{RideHail} type scenarios, as these scenarios are the most ``top heavy'' in comparison; a large cluster of users are willing to wait 7.5 to 20 minutes. The \emph{RideHail} type scenarios have the largest mean wait times (\textasciitilde10.65 minutes). Overall, wait time is significantly affected by which mode choice structure is used by BEAM, just like as was concluded with ridership.

The last group to compare collectively is between the Path and PPL models. By comparing BeamRideHail:Path and BeamRideHail:PPL, BeamAll:Path and BeamAll:PPL, and AsimBeamAll:Path and AsimBeamAll:PPL, we see that the Path models estimate a slightly higher maximum wait time. In addition, BeamRideHail:Path and AsimBeamRideHail:Path seem to have a larger cluster above a 10 minute wait time than BeamRideHail:PPL and AsimBeamRideHail:PPL. Besides these two observations though, the differences between utility parameters is minimal Although ridership was affected by which utility parameters were used, wait time is only slightly affected. We conclude that by lacking person and location variables, there is potential for a longer wait time for ride hail vehicles, although this observation is not concrete. More research would need to be done on this subject that is not within the scope of this paper.

\hypertarget{summary-1}{%
\subsection{Summary}\label{summary-1}}

Overall, by analyzing ride hail wait times we saw many of the same conclusions drawn by the ridership percentages verified. Ride hail service capabilities is affected significantly by the mode choice structure chosen. Initial plan, and whether or not they include ride hail, does affect service capabilities but only minimally (potential for longer wait times). Finally, the utility parameters used to calculate the mode choice does affect ridership. Ridership will increase when person and location variables are included. There is also potential for longer wait times when those variables are not included. These conclusions are clear, however, much of the results can be further explained by things beyond our control within this study. Section \ref{deep-look} takes a deeper look at why some patterns in the ridership and wait times results exist.

\hypertarget{deep-look}{%
\section{A Deeper Look at Ridership and Wait Times}\label{deep-look}}

The results from Table \ref{tab:tbexperiments} and the results from Figure \ref{fig:waits} can be explained further by understanding the original setup of the experiments. For example, the clearest distinction in ridership and wait times exist between BEAM mode choice structures. The \emph{None}, \emph{RideHail}, and \emph{All} structure types each produce results at a different magnitude. These vastly different results are directly related to how each model structure was constructed. To best explain the structure of each type however, Section \ref{type1} fist explains the \emph{None} structure, Section \ref{type3} then explains the \emph{All} structure, and finally Section \ref{type2} explains the \emph{RideHail} structure. The \emph{All} structure is more complex than the \emph{RideHail} structure, but the \emph{RideHail} structure was constructed in part due to the problems within the \emph{All} structure. For this reason, we explain the \emph{All} structure before the \emph{RideHail} structure.

\hypertarget{type1}{%
\subsection{BEAM (None) Effect on Results}\label{type1}}

The \emph{None} BEAM mode choice model type uses no mode choice code from the BEAM software. As explained in Table \ref{tab:tbexperiments}, this scenario descriptor points toward turning off BEAM's modal innovation. In a way, the results from these scenarios are almost identical to the direct output of ActivitySim itself. Since BEAM locked every trip's mode selection, we used these experiments to help understand the difference between how BEAM estimates ride hail against how ActivitySim estimates ride hail. Although it may seem illogical to use BEAM on top of ActivitySim for the \emph{None} type scenarios, it was still necessary to run them with BEAM because BEAM estimates ride hail service capabilities with more detail than ActivitySim (See Section \ref{lit-mas}).

\hypertarget{type3}{%
\subsection{BEAM (All) Effect on Results}\label{type3}}

The \emph{All} BEAM mode choice model type uses a linked mode choice model with that of ActivitySim (See Section \ref{meth-beam-link}) with all modal alternatives available. This adjusted model structure helps us better understand why we obtained much higher ridership than with the \emph{None} type. Figure \ref{fig:piechart} shows from which modes agents who switched to ride hail came from. Interestingly enough, the majority of agents who select ride hail switched from car type modes (car, hov2, and hov3). Adding together the car type modes, 74\% of agents from the AsimBeamAll:Path scenario, 73\% from the AsimBeamAll:PPL scenario, 74\% of agents from the BeamAll:Path scenario, and 75\% of agents from the BeamAll:PPL scenario switch from a car type mode to a ride hail type mode by the last iteration. While about three-fourths of agents switch to ride hail from car type modes, 14-17\% of agents switch from walk modes. Why is it that the \emph{All} BEAM mode choice structure projects that the majority of ride hail users originate from car type modes? The \emph{All} mode choice structure is consistent with that of ActivitySim, yet 75\% of ride hail users go against ActivitySim's original mode choice selection to use a car type vehicle.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/piechart-1} 

}

\caption{Original mode choices of agents who switch to a ride hail type mode.}\label{fig:piechart}
\end{figure}

We offer two factors as to why so many car users switch to ride hail modes. The first is that with the consistent mode choice structure, new utility parameter values are used to calculate the mode choice utility. The new utility parameters boost the ride hail utility, turning ride hail options into attractive alternatives. Figure \ref{fig:sankey} provides sufficient evidence for this claim. Figure \ref{fig:sankey} shows a sankey diagram of all modal decisions at the start of each iteration for the AsimBeamAll:PPL scenario. The mode ``No Mode'' describes those modes that were cleared and reset at the beginning of each iteration. (\textasciitilde10\% of all trips had their modes reset each iteration). Notice how many of the car, hov2, hov2 passenger, hov3, and hov3 passenger modes shift into the ``No Mode'' category each iteration. Also notice in the subsequent iteration how many of those ``No Mode'' choices shift to ride hail modes! A shift from the ``No Mode'' choice to ride hail represents those agents choosing their mode based on the utility value.

\begin{landscape}

\begin{figure}[H]
\centering
\includegraphics{planshifts.png}
\caption{Sankey plot of cool stuff}
\label{fig:sankey}
\end{figure}

\end{landscape}

The second, more influencing factor for why agents switch from car to ride hail has to do with how BEAM is programmed. BEAM implements a complex car tracking algorithm which keeps track of household and agent level vehicle allocation. For example, if a household owns one vehicle, then the vehicle is \emph{assigned} to the first agent to use it in the daily plan. This leaves the other household members to choose an alternate mode. ActivitySim monitors vehicle and agent level vehicle allocation differently by using auto sufficiency to estimate car mode choice at the household level. (Auto sufficient households are more likely to choose car than auto deficient households). BEAM's implementation of vehicular assignment prevents many agents from selecting a car mode, whereas ActivitySim may not prevent those same individuals from car usage. In addition to BEAM's vehicle assignment algorithm, BEAM's trip based mode choice structure also forces some car users to switch modes. Sometimes, agents will \emph{lose} their vehicle within the day. This occurs when a pathway cannot be built. If an agent \emph{loses} their car, they are likely to become unable to choose the car mode on future trips, as the car is usually gone and is no longer a valid modal alternative. Figure \ref{fig:walkers} provides evidence for this statement. Figure \ref{fig:walkers} displays a graph of those agents who start their day using a mode other than walk, but end up switching to the walk mode by the end of the day for the AsimBeamAll:PPL scenario. Notice how in each hour, as the percentage of walk users increases the percentage of car type modes remains constant or decreases. This helps show that hundreds of car type mode users are switching to walk modes instead of remaining with their vehicle. Choosing walk on a car tour usually means the car path couldn't be built and the car is unable to be used on future trips within the day. Looking at Figure \ref{fig:sankey} again, we notice that many walk users shift to ride hail each iteration. Therefore, many car type users who shift to walk during one trip, may shift to ride hail type vehicles on the next trip. This is true between corresponding iterations as well.

\begin{figure}

{\centering \includegraphics{thesis_files/figure-latex/walkers-1} 

}

\caption{Agents who switch to walk by time of day.}\label{fig:walkers}
\end{figure}

Overall, BEAM's internal code structure creates reasons to be unable to choose car modes, forcing agents to switch modal alternatives or get assigned the walk mode. The increase in ridership in the \emph{All} model from the \emph{None} model can be partially explained for these reasons.

\hypertarget{type2}{%
\subsection{BEAM (RideHail) Effect on Results}\label{type2}}

Finally, the way the \emph{RideHail} BEAM mode choice model was constructed explains why their ridership and wait times were high. The \emph{RideHail} model uses a linked mode choice model with that of ActivitySim, but only walk and transit users have the option to switch to ride hail type modes; car-type modes remained locked across each iteration. Whenever a ride hail path could be built, all walk modes were automatically given the option to choose ride hail or ride hail pooled and all transit modes were automatically given the option to choose ride hail transit. Although it made logical sense to lock all car-type modes (for reasons described in Section \ref{type3}), by giving ride hail options only to walk and transit users, ridership increased even more than in the \emph{All} scenario. The increase in ridership occurred because 1.) BEAM's adjusted code forced ride hail to be an option in almost all cases, and 2.) in most cases ride hail was calculated to be more attractive than walk or transit modes.

Table \ref{tab:timeutil} provides evidence in ride hail being an attractive mode choice alternative. Table \ref{tab:timeutil} displays the ride hail time utilization for each of the scenarios performed (except for NoRideHail). The same ride hail fleet was used in each of the 9 scenarios. The ride hail fleet was composed of 952 ride hail driver shifts. Ride hail time utilization was calculated as the sum of all the driver shift times divided by the sum of all the passenger occupied ride travel time. Obviously, the AsimRideHail scenario had the lowest ride hail time utilization, at only 4.046\%. This was because ActivitySim estimated a low ride hail ridership percentage and more drivers existed than riders. Interestingly, the \emph{All} type scenarios ranged from 53.123\% to 62.459\% ride hail time utilization. This explains the higher wait times shown in Figure \ref{fig:waits}! Higher ride hail utilization also explains why the Path models had higher maximum wait times. Finally, by analyzing the ride hail time utilization for the \emph{RideHail} scenarios, we fully understand how attractive ride hail was. With 70.270\% to 73.777\% of ride hail time utilization present for the \emph{RideHail} scenarios, we see three fourths of each driver's shift was used to transport passengers. This explains the attractiveness of the choice, the extreme increase in ridership, and also the increased wait time for the \emph{RideHail} type scenarios. In addition, it shows that if more driver shifts were available for the \emph{RideHail} scenarios, wait times would have been lower and ridership would have been higher.

\begin{table}

\caption{\label{tab:timeutil}Percent Ride Hail Time Utilization by Mode Choice Combination Scenario}
\centering
\begin{tabular}[t]{lr}
\toprule
ScenarioName & RideHailTimeUtilization\\
\midrule
AsimRideHail & 4.046\\
BeamRideHail:Path & 73.777\\
BeamRideHail:PPL & 70.270\\
AsimBeamRideHail:Path & 71.354\\
AsimBeamRideHail:PPL & 72.590\\
\addlinespace
BeamAll:Path & 62.459\\
BeamAll:PPL & 53.143\\
AsimBeamAll:Path & 58.739\\
AsimBeamAll:PPL & 53.123\\
\bottomrule
\end{tabular}
\end{table}

\hypertarget{summary-2}{%
\subsection{Summary}\label{summary-2}}

As seen by the explanation of the structure of the \emph{None}, \emph{All}, and \emph{RideHail} type scenarios, how BEAM's different mode choice structures are programmed affected total ride hail ridership and wait times significantly. By examining these structural differences, we better understand the effect mode choice has on forecasting novel modes. For example, the use of path, person, and location type variables cause ride hail to be a more attractive choice than if it were only calculated with the default BEAM parameters (See Section \ref{novel-beam}). In addition, BEAM's advanced car tracking algorithm and trip based mode structure causes many car type trips to shift to ride hail after first defaulting to the walk mode. Finally, we conclude that the \emph{RideHail} type scenario is best at forecasting novel mode usage, as shown by the high ride hail time utilization percentages. The \emph{RideHail} type scenario also avoids the BEAM pitfalls of loosing car modes and provides ride hailing vehicles to those who need it most. Although this is true, its limitation exists in that \emph{all} walk trips are given the option to shift to ride hail. In reality, only those walk trips who get their mode choice cleared after each iteration should have the opportunity to switch modes. This was not accounted for in the research methodology because of the complexity of the BEAM code adjustment. Section \ref{discussion} further describes the deeper meaning behind the ride hail, wait time, and mode choice structure results discovered in this section.

\hypertarget{discussion}{%
\chapter{Discussion}\label{discussion}}

According to the results presented in Section \ref{results}, mode choice structure significantly affects novel mode ridership and service capabilities. The results also suggest that whether or not ride hail exists in the multi-agent simulation's input plans does not make a significant difference to overall ride hail statistics. With both of these determinations in mind, we conclude that forecasters should use \emph{both} an activity-based model and a multi-agent simulation to forecast novel mode usage. However, we suggest that only one of these tools should be used to forecast ridership, while the multi-agent simulation should be used to forecast service capabilities. The results, backed up by the literature review conducted in Section \ref{lit}, illustrate why the multi-agent simulation should be used for service capability estimation. The results also suggest why only one of the tools should be used for ridership estimation. Specifically, the extreme variation in ridership among the 10 scenarios supports this conclusion. Overall, with these conclusions in mind, we offer two methodological approaches that forecasters should use to model novel modes:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Frozen Multi-Agent Estimation
\item
  Adjusted/Enhanced Multi-Agent Estimation
\end{enumerate}

\hypertarget{frozen-multi-agent-estimation}{%
\section{Frozen Multi-Agent Estimation}\label{frozen-multi-agent-estimation}}

In the Frozen Multi-Agent Estimation technique, we advice forecasters to use an activity-based model to estimate novel mode ridership usage. The activity-based model would be in charge of forecasting which users are prone to using the new mode and how many of these users should exist. Then, we advice forecasters to input these final plans into a multi-agent simulation to simulate all the trips. Mode choice innovation would be turned off (frozen) within the multi-agent simulation, meaning all mode choice would have been conducted in the activity-based model. The multi-agent simulation, however, would be used to verify that all the estimated novel mode trips are possible. In addition, the multi-agent simulation would use a simulated fleet of vehicles, variable wait times if applicable, and a street network to provide realistic service capability estimation.

The Frozen Multi-Agent Estimation technique is identical to the AsimRideHail scenario presented in Section \ref{results}. The results from the AsimRideHail scenario were reasonable, understandable, and realistic. For example, ridership values for this scenario were closest to the expected regional totals. Wait time values were also reasonable, especially when accounting for the amount of total users in comparison to the size of the ride hail fleet. In addition, the AsimRideHail scenario avoided all the pitfalls that existed in the scenarios where BEAM modal innovation was turned on. For example, without modal innovation turned on in BEAM, the vehicle allocation problem was avoided; car users did not unexpectably switch to a ride hailing mode. This approach was simplest, because a consistent mode choice structure wasn't needed, but the advantages of the multi-agent simulation tool were exploited.

Overall, the Frozen Multi-Agent Estimation technique will allow forecasters to exploit the advantages of using an activity-based model and of using a multi-agent simulation while also avoiding the disadvantages of each tool. Our results back this statement, as this methodology will produce ridership closest to the regional totals, while also producing realistic expected wait times and other service capabilities. We recommend that forecasters use this methodology for simple, yet effective ride hail estimation. Alternatively, we also recommend the Adjusted/Enhanced Multi-Agent Estimation technique if desired.

\hypertarget{adjustedenhanced-multi-agent-estimation}{%
\section{Adjusted/Enhanced Multi-Agent Estimation}\label{adjustedenhanced-multi-agent-estimation}}

In the Adjusted/Enhanced Multi-Agent Estimation technique, we advice forecasters to use a hybrid between an activity-based model and a multi-agent simulation. The activity-based model would be used to generate the input plans, which would exclude ride hail modes. The multi-agent simulation would be used to update those choices provided by the input plans to include ride hail modes. In other words, the multi-agent simulation would be the primary tool for forecasting ride hail trips. Within the multi-agent simulation, however, we recommend adjusting the internal structure as to avoid its inherit pitfalls. By adjusting the internal code of the multi-agent simulation, many of its disadvantages are overcome. For example, one may consider changing its trip-based mode choice structure to align closer with an activity-based model (i.e.~use tour mode choice variables).

The Adjusted/Enhanced Multi-Agent Estimation technique was similar to the BeamRideHailType scenarios in our study. These scenarios, which used the \emph{RideHail} mode choice model, were built to overcome the inherit weaknesses of the multi-agent simulation present in the \emph{All} mode choice model. Specifically, we faced an imperfect car-matching algorithm paired with a trip-based mode choice model. These weaknesses caused an inexplicably high number of car users to choose ride hail alternatives, even if this choice didn't make logical sense. Therefore, we avoided these pitfalls by only allowing those most likely to choose ride hail alternatives (non-car users) to be able to choose ride hail alternatives. Unfortunately, we were unable to perfect our hybrid model because the ride hail choice was provided excessively to all non-car users. However, by limiting ride hail to only those who would go through the clear modes step, the \emph{RideHail} model would have performed exceptionally well at forecasting novel modes.

Overall, the Adjusted/Enhanced Multi-Agent Estimation technique will allow forecasters to perform all ride hail estimation within a multi-agent simulation. The forecasters will be able to fully exploit the benefits that exist when using multi-agent simulation, while being sure that their results are valid. Our results show that if the inherit weaknesses present in the multi-agent simulation can be overcome, ride hail ridership, utilization, and service capabilities will be estimated effectively. We warn however, that the Adjusted/Enhanced Multi-Agent Estimation technique will be time consuming and difficult to implement. It requires forecasters to fully understand how the multi-agent simulation they choose to use functions.

\hypertarget{additional-findings}{%
\section{Additional Findings}\label{additional-findings}}

Along with recommending two methodological approaches to forecasting novel modes, we provide a few additional suggestions. First, we recommend using all path, person, and location type variables to model the mode choice utility. A wide variety of utility parameters helps to create a more realistic modeling environment. In addition, we advice forecasters to tread carefully when forecasting novel modes with activity-based models or multi-agent simulations. Both tools are flexible enough to allow the user to change how they fundamentally work; they can even be changed until the users gets the desired outcome. Using both tools will minimize this risk. Forecaster should also be aware of model consistency and the mode choice structures being used. Overall, by following the recommendations given in this section, along with professional judgement, modeling novel modes between activity-based models and multi-agent simulations becomes effective.

\hypertarget{limitations}{%
\chapter{Limitations}\label{limitations}}

In order to complete the research in a reasonable time frame, various components of the activity-based model and multi-agent simulation were not perfected. Instead of listing all of the limitations, a few main ones are addressed in this section. First, the ActivitySim model for the Salt Lake City, Utah region was based mainly off of the MTC example model from ActivitySim's archives. As a result, much of the parameters were held constant in our case study. The trip and tour mode choice coefficients were however, calibrated to the case study region. Since the other parameters were held constant, like the activity estimation parameters, the mode choice coefficients could only be calibrated so far. The mode choices determined by ActivitySim were close to regional target values, but were not perfect. A similar limitation existed within BEAM, where the mode choice coefficients were only calibrated as far as reasonably possible. The mode choices produced by BEAM were slightly different than the target values, and did not represent a completely accurate total modal distribution. Time restraint on the project prevented us from improving the accuracy of the utility parameters used to calculate mode choice in ActivitySim and BEAM. Fortunately, the results in our research remain valid since the mode choice combinations comparisons were more significant than the exact predictions.

In addition to the mode choice parameters, a few more limitations existed with the BEAM software. BEAM was in development throughout the life of this research, so its capabilities were also in development. For example, activity plans remained constant across each iteration. BEAM is exclusively a trip-based model; no tour level decision making occured. In addition, the BEAM developers let us know that the plans files used to create Figure \ref{fig:sankey} were not a perfect representation of the mode choices chosen each iteration. These plans files did however give a sufficiently good idea of what was happening behind the scenes. The mode choice models we developed within BEAM also included a few limitations. The \emph{All} structure had various car-matching difficulties as well as path-building difficulties. The \emph{RideHail} structure gave the ride hail alternative to all individuals instead of only those who had their mode wipped between iterations.

The two biggest limitations with the input files related to the driver fleet and the network file. The driver fleet was developed by a fellow research student form another university, and the student did not factor in university and school location when statistically modeling the start of each ride hail vehicle. Second, the network file we used was not an all street network, because it was too difficult to develop a reliable all streets network from the resources available. The last significant limitation of the research was that the results were from the 12th iteration of a 15\% scenario size. Due to our limited resources with computing power, larger scenarios and more iterations too computationally heavy for our super computers.

\hypertarget{further-research}{%
\section{Further Research}\label{further-research}}

With these limitations in mind, a few ideas are relevant for future research studies. First, we first recommend updating BEAM's mode choice model to include tour level choices, an improved car matching algorithm, and an improved \emph{RideHail} model. By conducting these few changes, accurate hybrid models between ActivitySim and BEAM could be developed, further supporting the results of this research. In addition to fixing these specific models, we recommend in future research to develop a hybrid activity-based model and multi-agent simulation with the MATSim software. MATSim is a more stable and reliable multi-agent simulation than BEAM, and connecting MATSim with an activity-based model to forecast novel modes could prove powerful. Finally, the last recommendation for further research is abstract in that we believe combining an activity-based model and a multi-agent simulation into one model could prove highly useful. Creating a model which incorporates activity-based components into a multi-agent simulation tool may be the best methodological approach to forecasting new transport technologies to date.

\hypertarget{conclusions}{%
\chapter{Conclusions}\label{conclusions}}

`r
\# \{=latex\} for thesis
\# \{\} for elsevier'

\cleardoublepage
    \bookmarksetupnext{level=part}
    \phantomsection
    \addcontentsline{toc}{chapter}{References}
    \begin{centering}
    REFERENCES\\
    \vskip 1 \baselineskip
    \end{centering}
    

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\vadjust pre{\hypertarget{ref-rsg21}{}}%
{``ActivitySim: An Advanced Activity-Based Travel Demand Model Built by and for Users.''} 2021. \emph{RSG}. \url{https://rsginc.com/activitysim-white-paper/\#advanced-activity-based-travel-demand-model}.

\leavevmode\vadjust pre{\hypertarget{ref-adler05}{}}%
Adler, Jeffrey L, Goutam Satapathy, Vikram Manikonda, Betty Bowles, and Victor J Blue. 2005. {``A Multi-Agent Approach to Cooperative Traffic Management and Route Guidance.''} \emph{Transportation Research Part B: Methodological} 39 (4): 297--318.

\leavevmode\vadjust pre{\hypertarget{ref-agrc}{}}%
AGRC. 2021. \emph{Automated Geographic Reference Center}. \url{https://gis.utah.gov/}.

\leavevmode\vadjust pre{\hypertarget{ref-amblard15}{}}%
Amblard, Frédéric, Eric Daudé, Benoît Gaudou, Arnaud Grignard, Guillaume Hutzler, Christophe Lang, Nicolas Marilleau, Jean-Marc Nicod, David Sheeren, and Patrick Taillandier. 2015. {``Introduction to NetLogo.''} In \emph{Agent-Based Spatial Simulation with Netlogo}, 75--123. Elsevier.

\leavevmode\vadjust pre{\hypertarget{ref-bazghandi12}{}}%
Bazghandi, Ali. 2012. {``Techniques, Advantages and Problems of Agent Based Modeling for Traffic Simulation.''} \emph{International Journal of Computer Science Issues (IJCSI)} 9 (1): 115.

\leavevmode\vadjust pre{\hypertarget{ref-beam}{}}%
BEAM. 2022. \emph{Behavior, Energy, Autonomy, and Mobility}. Lawrence Berkeley National Laboratory the UC Berkeley Institute for Transportation Studies. \url{https://beam.readthedocs.io/en/develop/users.html}.

\leavevmode\vadjust pre{\hypertarget{ref-becker20}{}}%
Becker, Henrik, Milos Balac, Francesco Ciari, and Kay W Axhausen. 2020. {``Assessing the Welfare Impacts of Shared Mobility and Mobility as a Service (MaaS).''} \emph{Transportation Research Part A: Policy and Practice} 131: 228--43.

\leavevmode\vadjust pre{\hypertarget{ref-biehl19}{}}%
Biehl, Alec, Alireza Ermagun, and Amanda Stathopoulos. 2019. {``Utilizing Multi-Stage Behavior Change Theory to Model the Process of Bike Share Adoption.''} \emph{Transport Policy} 77: 30--45.

\leavevmode\vadjust pre{\hypertarget{ref-bowman98}{}}%
Bowman, John Lawrence. 1998. {``The Day Activity Schedule Approach to Travel Demand Analysis.''} PhD thesis, Massachusetts Institute of Technology.

\leavevmode\vadjust pre{\hypertarget{ref-nchrp}{}}%
Cambridge Systematics, Inc., Inc. Vanasse Hangen Brustlin, Gallop Corporation, Chandra R. Bhat, LLC Shapiro Transportation Consulting, and PLLC Martin/Alexiou/Bryson. 2012. {``Travel Demand Forecasting: Parameters and Techniques.''} In \emph{NCHRP Report 716}, 55--60. Transportation Research Board.

\leavevmode\vadjust pre{\hypertarget{ref-campbell16}{}}%
Campbell, Andrew A, Christopher R Cherry, Megan S Ryerson, and Xinmiao Yang. 2016. {``Factors Influencing the Choice of Shared Bicycles and Shared Electric Bikes in Beijing.''} \emph{Transportation Research Part C: Emerging Technologies} 67: 399--414.

\leavevmode\vadjust pre{\hypertarget{ref-cetin02}{}}%
Cetin, Nurhan, Kai Nagel, Bryan Raney, and Andreas Voellmy. 2002. {``Large-Scale Multi-Agent Transportation Simulations.''} \emph{Computer Physics Communications} 147 (1-2): 559--64.

\leavevmode\vadjust pre{\hypertarget{ref-chen21}{}}%
Chen, Long, Piyushimita Vonu Thakuriah, and Konstantinos Ampountolas. 2021. {``Short-Term Prediction of Demand for Ride-Hailing Services: A Deep Learning Approach.''} \emph{Journal of Big Data Analytics in Transportation} 3 (2): 175--95.

\leavevmode\vadjust pre{\hypertarget{ref-cho22}{}}%
Cho, Shin-Hyung, and DongHwa Shin. 2022. {``Estimation of Route Choice Behaviors of Bike-Sharing Users as First-and Last-Mile Trips for Introduction of Mobility-as-a-Service (MaaS).''} \emph{KSCE Journal of Civil Engineering}, 1--12.

\leavevmode\vadjust pre{\hypertarget{ref-ciari16}{}}%
Ciari, Francesco, Milos Balac, and Kay W Axhausen. 2016. {``Modeling Carsharing with the Agent-Based Simulation MATSim: State of the Art, Applications, and Future Developments.''} \emph{Transportation Research Record} 2564 (1): 14--20.

\leavevmode\vadjust pre{\hypertarget{ref-r5}{}}%
Conveyal. 2022. \emph{R5: Rapid Realistic Routing on Real-World and Reimagined Networks}. \url{https://github.com/conveyal/r5}.

\leavevmode\vadjust pre{\hypertarget{ref-dean21}{}}%
Dean, Matthew D, and Kara M Kockelman. 2021. {``Spatial Variation in Shared Ride-Hail Trip Demand and Factors Contributing to Sharing: Lessons from Chicago.''} \emph{Journal of Transport Geography} 91: 102944.

\leavevmode\vadjust pre{\hypertarget{ref-dia02}{}}%
Dia, Hussein. 2002. {``An Agent-Based Approach to Modelling Driver Route Choice Behaviour Under the Influence of Real-Time Information.''} \emph{Transportation Research Part C: Emerging Technologies} 10 (5-6): 331--49.

\leavevmode\vadjust pre{\hypertarget{ref-djavadian17}{}}%
Djavadian, Shadi, and Joseph YJ Chow. 2017. {``An Agent-Based Day-to-Day Adjustment Process for Modeling `Mobility as a Service'with a Two-Sided Flexible Transport Market.''} \emph{Transportation Research Part B: Methodological} 104: 36--57.

\leavevmode\vadjust pre{\hypertarget{ref-dong20}{}}%
Dong, Xiaoxia. 2020. {``Trade Uber for the Bus?''} \emph{Journal of the American Planning Association} 86 (2): 222--35.

\leavevmode\vadjust pre{\hypertarget{ref-fujii17}{}}%
Fujii, Hideki, Hideaki Uchida, and Shinobu Yoshimura. 2017. {``Agent-Based Simulation Framework for Mixed Traffic of Cars, Pedestrians and Trams.''} \emph{Transportation Research Part C: Emerging Technologies} 85: 234--48.

\leavevmode\vadjust pre{\hypertarget{ref-gali08}{}}%
Gali, Emmanuel, Stephan Eidenbenz, Sue Mniszewski, Leticia Cuellar, and Christof Teuscher. 2008. {``ActivitySim: Large-Scale Agent Based Activity Generation for Infrastructure Simulation,''} January. \url{https://www.osti.gov/biblio/960770}.

\leavevmode\vadjust pre{\hypertarget{ref-gomes21}{}}%
Gomes, Viviani Antunes, MUC CALDAS, and Cira Souza Pitombo. 2021. {``An Investigation of Trip-Chaining Behaviour Based on Activity Participation, Socioeconomic Variables and Aggregated Characteristics of Modal Alternatives.''} \emph{Revista Transportes} 29 (1): 21--41.

\leavevmode\vadjust pre{\hypertarget{ref-hasnine21}{}}%
Hasnine, Md Sami, and Khandker Nurul Habib. 2021. {``Tour-Based Mode Choice Modelling as the Core of an Activity-Based Travel Demand Modelling Framework: A Review of State-of-the-Art.''} \emph{Transport Reviews} 41 (1): 5--26.

\leavevmode\vadjust pre{\hypertarget{ref-horl19}{}}%
Hörl, Sebastian, Miloš Balać, and Kay W Axhausen. 2019. {``Pairing Discrete Mode Choice Models and Agent-Based Transport Simulation with MATSim.''} In \emph{2019 TRB Annual Meeting Online}, 19--02409. Transportation Research Board.

\leavevmode\vadjust pre{\hypertarget{ref-horl19b}{}}%
Hörl, Sebastian, Claudio Ruch, Felix Becker, Emilio Frazzoli, and Kay W Axhausen. 2019. {``Fleet Operational Policies for Automated Mobility: A Simulation Assessment for Zurich.''} \emph{Transportation Research Part C: Emerging Technologies} 102: 20--31.

\leavevmode\vadjust pre{\hypertarget{ref-hosseinzadeh21}{}}%
Hosseinzadeh, Aryan, Majeed Algomaiah, Robert Kluger, and Zhixia Li. 2021. {``Spatial Analysis of Shared e-Scooter Trips.''} \emph{Journal of Transport Geography} 92: 103016.

\leavevmode\vadjust pre{\hypertarget{ref-hyland18}{}}%
Hyland, Michael, Zihan Hong, Helen Karla Ramalho de Farias Pinto, and Ying Chen. 2018. {``Hybrid Cluster-Regression Approach to Model Bikeshare Station Usage.''} \emph{Transportation Research Part A: Policy and Practice} 115: 71--89.

\leavevmode\vadjust pre{\hypertarget{ref-kamel19}{}}%
Kamel, Joseph, Reza Vosooghi, Jakob Puchinger, Feirouz Ksontini, and Göknur Sirin. 2019. {``Exploring the Impact of User Preferences on Shared Autonomous Vehicle Modal Split: A Multi-Agent Simulation Approach.''} \emph{Transportation Research Procedia} 37: 115--22.

\leavevmode\vadjust pre{\hypertarget{ref-kang21}{}}%
Kang, Shuqing, Aupal Mondal, Aarti C Bhat, and Chandra R Bhat. 2021. {``Pooled Versus Private Ride-Hailing: A Joint Revealed and Stated Preference Analysis Recognizing Psycho-Social Factors.''} \emph{Transportation Research Part C: Emerging Technologies} 124: 102906.

\leavevmode\vadjust pre{\hypertarget{ref-knapen21}{}}%
Knapen, Luk, Muhammad Adnan, Bruno Kochan, Tom Bellemans, Marieke van der Tuin, Han Zhou, and Maaike Snelder. 2021. {``An Activity Based Integrated Approach to Model Impacts of Parking, Hubs and New Mobility Concepts.''} \emph{Procedia Computer Science} 184: 428--37.

\leavevmode\vadjust pre{\hypertarget{ref-nate}{}}%
Lant, Nathan John. 2021. {``Estimation and Simulation of Daily Activity Patterns for Individuals Using Wheelchairs.''} PhD thesis, Brigham Young University.

\leavevmode\vadjust pre{\hypertarget{ref-lazarus20}{}}%
Lazarus, Jessica, Jean Carpentier Pourquier, Frank Feng, Henry Hammel, and Susan Shaheen. 2020. {``Micromobility Evolution and Expansion: Understanding How Docked and Dockless Bikesharing Models Complement and Compete--a Case Study of San Francisco.''} \emph{Journal of Transport Geography} 84: 102620.

\leavevmode\vadjust pre{\hypertarget{ref-leeb21}{}}%
Lee, Hyukseong, Kwangho Baek, Jin-Hyuk Chung, and Jinhee Kim. 2021. {``Factors Affecting Heterogeneity in Willingness to Use e-Scooter Sharing Services.''} \emph{Transportation Research Part D: Transport and Environment} 92: 102751.

\leavevmode\vadjust pre{\hypertarget{ref-lee21}{}}%
Lee, Mina, Joseph YJ Chow, Gyugeun Yoon, and Brian Yueshuai He. 2021. {``Forecasting e-Scooter Substitution of Direct and Access Trips by Mode and Distance.''} \emph{Transportation Research Part D: Transport and Environment} 96: 102892.

\leavevmode\vadjust pre{\hypertarget{ref-li18b}{}}%
Li, Qing, Feixiong Liao, Harry JP Timmermans, Haijun Huang, and Jing Zhou. 2018. {``Incorporating Free-Floating Car-Sharing into an Activity-Based Dynamic User Equilibrium Model: A Demand-Side Model.''} \emph{Transportation Research Part B: Methodological} 107: 102--23.

\leavevmode\vadjust pre{\hypertarget{ref-li18}{}}%
Li, Weibo, and Maria Kamargianni. 2018. {``Providing Quantified Evidence to Policy Makers for Promoting Bike-Sharing in Heavily Air-Polluted Cities: A Mode Choice Model and Policy Simulation for Taiyuan-China.''} \emph{Transportation Research Part A: Policy and Practice} 111: 277--91.

\leavevmode\vadjust pre{\hypertarget{ref-li20}{}}%
Li, Yuanyuan, Yang Liu, and Jun Xie. 2020. {``A Path-Based Equilibrium Model for Ridesharing Matching.''} \emph{Transportation Research Part B: Methodological} 138: 373--405.

\leavevmode\vadjust pre{\hypertarget{ref-macfarlane21}{}}%
Macfarlane, Gregory S, Nathan J Lant, et al. 2021. {``Estimation and Simulation of Daily Activity Patterns for Individuals Using Wheelchairs.''} Utah. Dept. of Transportation. Division of Research.

\leavevmode\vadjust pre{\hypertarget{ref-mahmoudi21}{}}%
Mahmoudi, Monirehalsadat, Lu (Carol) Tong, Venu M. Garikapati, Ram M. Pendyala, and Xuesong Zhou. 2021. {``How Many Trip Requests Could We Support? An Activity-Travel Based Vehicle Scheduling Approach.''} \emph{Transportation Research Part C: Emerging Technologies} 128. https://doi.org/\url{https://doi.org/10.1016/j.trc.2021.103222}.

\leavevmode\vadjust pre{\hypertarget{ref-mckenzie19}{}}%
McKenzie, Grant. 2019. {``Spatiotemporal Comparative Analysis of Scooter-Share and Bike-Share Usage Patterns in Washington, DC.''} \emph{Journal of Transport Geography} 78: 19--28.

\leavevmode\vadjust pre{\hypertarget{ref-mo22}{}}%
Mo, Dong, Xiqun Michael Chen, and Junlin Zhang. 2022. {``Modeling and Managing Mixed on-Demand Ride Services of Human-Driven Vehicles and Autonomous Vehicles.''} \emph{Transportation Research Part B: Methodological} 157: 80--119.

\leavevmode\vadjust pre{\hypertarget{ref-moeckel20}{}}%
Moeckel, Rolf, Nico Kuehnel, Carlos Llorca, Ana Tsui Moreno, and Hema Rayaprolu. 2020. {``Agent-Based Simulation to Improve Policy Sensitivity of Trip-Based Models.''} \emph{Journal of Advanced Transportation} 2020.

\leavevmode\vadjust pre{\hypertarget{ref-mtc12}{}}%
MTC. 2012. \emph{Travel Model Development: Calibration and Validation Technical Report}. Metropolitan Transportation Commission with Parsons Brinckerhoff, Inc.

\leavevmode\vadjust pre{\hypertarget{ref-muhammad19}{}}%
Muhammad, Hafiz, Ahsan IQBAL, Muhammad ADNAN, Bruno KOCHAN, Tom BELLEMANS, and Davy JANSSENS. 2019. {``Incorporating MaaS Concept into an Operational Activity-Based Modelling Platform.''} In.

\leavevmode\vadjust pre{\hypertarget{ref-nayak22}{}}%
Nayak, Suchismita, and Debapratim Pandit. 2022. {``Activity-Based Model: Requisite for a New Travel Demand Forecasting Approach for India.''} In \emph{Proceedings of the Fifth International Conference of Transportation Research Group of India}, 109--21. Springer.

\leavevmode\vadjust pre{\hypertarget{ref-neutens08}{}}%
Neutens, Tijs, Tim Schwanen, Frank Witlox, and Philippe De Maeyer. 2008. {``My Space or Your Space? Towards a Measure of Joint Accessibility.''} \emph{Computers, Environment and Urban Systems} 32 (5): 331--42.

\leavevmode\vadjust pre{\hypertarget{ref-nguyen22}{}}%
Nguyen, Tri K, Nam H Hoang, and Hai L Vu. 2022. {``A Unified Activity-Based Framework for One-Way Car-Sharing Services in Multi-Modal Transportation Networks.''} \emph{Transportation Research Part E: Logistics and Transportation Review} 157: 102551.

\leavevmode\vadjust pre{\hypertarget{ref-pendyala17}{}}%
Pendyala, Ram M, Daehyun You, Venu M Garikapati, Karthik C Konduri, and Xuesong Zhou. 2017. {``Paradigms for Integrated Modeling of Activity-Travel Demand and Network Dynamics in an Era of Dynamic Mobility Management.''}

\leavevmode\vadjust pre{\hypertarget{ref-philip13}{}}%
Philip, Milimol, T Sreelatha, and Soosan George. 2013. {``Activity Based Travel Behavioural Study and Mode Choice Modelling.''} \emph{Int J Innov Res Sci Eng Technol} 2 (1): 181--90.

\leavevmode\vadjust pre{\hypertarget{ref-popsim}{}}%
PopulationSim. 2021. \emph{An Open Platform for Population Synthesis} (version 0.5). \url{https://activitysim.github.io/populationsim/}.

\leavevmode\vadjust pre{\hypertarget{ref-reck21}{}}%
Reck, Daniel J, He Haitao, Sergio Guidon, and Kay W Axhausen. 2021. {``Explaining Shared Micromobility Usage, Competition and Mode Choice by Modelling Empirical Data from Zurich, Switzerland.''} \emph{Transportation Research Part C: Emerging Technologies} 124: 102947.

\leavevmode\vadjust pre{\hypertarget{ref-rsg16}{}}%
RSG. 2016. \emph{Pricing and Travel Time Reliability Enhancements in the SANDAG Activity-Based Travel Model: Final Report}.

\leavevmode\vadjust pre{\hypertarget{ref-sanchez19}{}}%
Sánchez, Pedro, Denis Pato, Gabriel Martín, et al. 2019. {``CTRANSPORT: Multi-Agent-Based Simulation.''}

\leavevmode\vadjust pre{\hypertarget{ref-shiftan00}{}}%
Shiftan, Yoram. 2000. {``The Advantage of Activity-Based Modelling for Air-Quality Purposes: Theory Vs Practice and Future Needs.''} \emph{Innovation: The European Journal of Social Science Research} 13 (1): 95--110.

\leavevmode\vadjust pre{\hypertarget{ref-shimizu13}{}}%
Shimizu, Shota, Kenju Akai, and Nariaki Nishino. 2013. {``Modeling and Multi-Agent Simulation of Bicycle Sharing.''} In \emph{International Conference on Serviceology}, 39--46. Springer.

\leavevmode\vadjust pre{\hypertarget{ref-siebers08}{}}%
Siebers, Peer-Olaf, and Uwe Aickelin. 2008. {``Introduction to Multi-Agent Simulation.''} In \emph{Encyclopedia of Decision Making and Decision Support Technologies}, 554--64. IGI Global.

\leavevmode\vadjust pre{\hypertarget{ref-song19}{}}%
Song, Mingzhu, Yi Zhang, Zuojun Max Shen, Meng Li, and Zhenning Dong. 2019. {``Mode Shift from Car to Bike Shared: A Travel-Mode Choice Model.''} In \emph{CICTP 2019}, 2398--2410.

\leavevmode\vadjust pre{\hypertarget{ref-soo09}{}}%
Soo (Kum Lin, Joyce). 2009. \emph{Towards a Multi-Activity Multi-Erson Accessibility Measure}. Faculty of Geosciences, Utrecht University.

\leavevmode\vadjust pre{\hypertarget{ref-tchappi18}{}}%
Tchappi, Igor Haman, Stéphane Galland, Vivient Corneille Kamla, and Jean Claude Kamgang. 2018. {``A Brief Review of Holonic Multi-Agent Models for Traffic and Transportation Systems.''} \emph{Procedia Computer Science} 134: 137--44.

\leavevmode\vadjust pre{\hypertarget{ref-tuli21}{}}%
Tuli, Farzana Mehzabin, Suman Mitra, and Mariah B Crews. 2021. {``Factors Influencing the Usage of Shared e-Scooters in Chicago.''} \emph{Transportation Research Part A: Policy and Practice} 154: 164--85.

\leavevmode\vadjust pre{\hypertarget{ref-tzouras22}{}}%
Tzouras, Panagiotis G, Lambros Mitropoulos, Eirini Stavropoulou, Eleni Antoniou, Katerina Koliou, Christos Karolemeas, Antonis Karaloulis, et al. 2022. {``Agent-Based Models for Simulating e-Scooter Sharing Services: A Review and a Qualitative Assessment.''} \emph{International Journal of Transportation Science and Technology}.

\leavevmode\vadjust pre{\hypertarget{ref-utahstate}{}}%
UDOT. 2021. \emph{Utah State Travel Demand Model}. Utah Department of Transportation.

\leavevmode\vadjust pre{\hypertarget{ref-vyas19}{}}%
Vyas, Gaurav, Pooneh Famili, Peter Vovsha, Daniel Fay, Ashish Kulshrestha, Greg Giaimo, and Rebekah Anderson. 2019. {``Incorporating Features of Autonomous Vehicles in Activity-Based Travel Demand Model for Columbus, OH.''} \emph{Transportation} 46 (6): 2081--2102.

\leavevmode\vadjust pre{\hypertarget{ref-wadud21}{}}%
Wadud, Zia, and Phani Kumar Chintakayala. 2021. {``To Own or Not to Own--That Is the Question: The Value of Owning a (Fully Automated) Vehicle.''} \emph{Transportation Research Part C: Emerging Technologies} 123: 102978.

\leavevmode\vadjust pre{\hypertarget{ref-welch20}{}}%
Welch, Timothy F, Steven R Gehrke, and Alyas Widita. 2020. {``Shared-Use Mobility Competition: A Trip-Level Analysis of Taxi, Bikeshare, and Transit Mode Choice in Washington, DC.''} \emph{Transportmetrica A: Transport Science} 16 (1): 43--55.

\leavevmode\vadjust pre{\hypertarget{ref-wfrc}{}}%
WFRC. 2019. \emph{Wasatch Front Travel Demand Model} (version v8.3.1). Wasatch Front Regional Council. \url{https://wfrc.org/programs/models-forecasting/}.

\leavevmode\vadjust pre{\hypertarget{ref-xu19}{}}%
Xu, Xiang, Hani S Mahmassani, and Ying Chen. 2019. {``Privately Owned Autonomous Vehicle Optimization Model Development and Integration with Activity-Based Modeling and Dynamic Traffic Assignment Framework.''} \emph{Transportation Research Record} 2673 (10): 683--95.

\leavevmode\vadjust pre{\hypertarget{ref-younes20}{}}%
Younes, Hannah, Zhenpeng Zou, Jiahui Wu, and Giovanni Baiocchi. 2020. {``Comparing the Temporal Determinants of Dockless Scooter-Share and Station-Based Bike-Share in Washington, DC.''} \emph{Transportation Research Part A: Policy and Practice} 134: 308--20.

\leavevmode\vadjust pre{\hypertarget{ref-zhang06}{}}%
Zhang, Junyi, and Akimasa Fujiwara. 2006. {``Representing Household Time Allocation Behavior by Endogenously Incorporating Diverse Intra-Household Interactions: A Case Study in the Context of Elderly Couples.''} \emph{Transportation Research Part B: Methodological} 40 (1): 54--74.

\leavevmode\vadjust pre{\hypertarget{ref-zhang18}{}}%
Zhang, Lei, Di Yang, Sepehr Ghader, Carlos Carrion, Chenfeng Xiong, Thomas F Rossi, Martin Milkovits, Subrat Mahapatra, and Charles Barber. 2018. {``An Integrated, Validated, and Applied Activity-Based Dynamic Traffic Assignment Model for the Baltimore-Washington Region.''} \emph{Transportation Research Record} 2672 (51): 45--55.

\leavevmode\vadjust pre{\hypertarget{ref-zhang21}{}}%
Zhang, Wenwen, Ralph Buehler, Andrea Broaddus, and Ted Sweeney. 2021. {``What Type of Infrastructures Do e-Scooter Riders Prefer? A Route Choice Model.''} \emph{Transportation Research Part D: Transport and Environment} 94: 102761.

\leavevmode\vadjust pre{\hypertarget{ref-zhou20}{}}%
Zhou, Fan, Zuduo Zheng, Jake Whitehead, Simon Washington, Robert K Perrons, and Lionel Page. 2020. {``Preference Heterogeneity in Mode Choice for Car-Sharing and Shared Automated Vehicles.''} \emph{Transportation Research Part A: Policy and Practice} 132: 633--50.

\leavevmode\vadjust pre{\hypertarget{ref-zhou19}{}}%
Zhou, Xiaolu, Mingshu Wang, and Dongying Li. 2019. {``Bike-Sharing or Taxi? Modeling the Choices of Travel Mode in Chicago Using Machine Learning.''} \emph{Journal of Transport Geography} 79: 102479.

\leavevmode\vadjust pre{\hypertarget{ref-zuniga22}{}}%
Zuniga-Garcia, Natalia, Mauricio Tec, James G Scott, and Randy B Machemehl. 2022. {``Evaluation of e-Scooters as Transit Last-Mile Solution.''} \emph{Transportation Research Part C: Emerging Technologies} 139: 103660.

\leavevmode\vadjust pre{\hypertarget{ref-zwick21}{}}%
Zwick, Felix, Nico Kuehnel, Rolf Moeckel, and Kay W Axhausen. 2021. {``Agent-Based Simulation of City-Wide Autonomous Ride-Pooling and the Impact on Traffic Noise.''} \emph{Transportation Research Part D: Transport and Environment} 90: 102673.

\end{CSLReferences}


% Index?

\end{document}
